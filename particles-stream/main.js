!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),r=t[e[0]];return function(t,e,i){r.apply(this,[t,e,i].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}var o=n(16),s=i(o),a=n(2),u=r(a),c=void 0,l=function(){var t=document.getElementById("canvas");u.init(t,!0),c=new s.default,window.addEventListener("resize",h),h()},h=function(){c.resize()};l()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),c=r(u),l=n(39),h=r(l),d=n(3),f=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.uvs=[],s.normals=[],s.program=t,s.state=n||new c.default(s.program.gl),n||(s.state.depthTest=!0),s.instanceCount=0,s.drawType=r,s._attributes=[],s._vertices=[],s._indices=[],s.matrix=d.mat4.create(),s._vertexSize=0,s._numItems=0,s.indexBuffer=null,s}return s(e,t),a(e,[{key:"addIndices",value:function(t,e){var n=this.program.gl,r=e?n.DYNAMIC_DRAW:n.STATIC_DRAW;this._indices=t,this.indexBuffer||(this.indexBuffer=n.createBuffer()),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),r)}},{key:"addPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"aPosition",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;this._vertices=t,this._vertexSize=this._vertices.length,this._numItems=this._vertexSize/n,this.addAttribute(t,e,n)}},{key:"updatePosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aPosition",e=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;this._vertices=e,this._vertexSize=this._vertices.length,this._numItems=this._vertexSize/n,this.updateAttribute(t,e)}},{key:"addAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments[3],i=this.program.gl,o=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,o),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),i.STATIC_DRAW),this._attributes.push({name:e,data:t,itemSize:n,numItems:this._numItems,buffer:o,instance:r}),this.program.addAttributeLocation(e)}},{key:"updateAttribute",value:function(t,e){for(var n=this.program.gl,r=0;r<this._attributes.length;r++){var i=this._attributes[r];if(i.name===t){var o=i.buffer;n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e),n.STATIC_DRAW),i.data=e;break}}}}]),e}(h.default);e.default=f,t.exports=e.default},function(t,e,n){(function(t){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.loaders=e.helpers=e.FrameBuffer=e.geometry=e.State=e.control=e.cameras=e.CONST=e.DataTexture=e.Texture=e.utils=e.GLExtensions=e.GL=e.Program=e.init=void 0;var o=n(11),s=i(o),a=n(52),u=i(a),c=n(40),l=i(c),h=n(31),d=i(h),f=n(32),p=i(f),_=n(54),v=i(_),m=n(53),g=i(m),b=n(34),y=i(b),x=n(36),E=i(x),w=n(5),M=i(w),T=n(12),O=i(T),A=n(49),P=i(A),S=n(56),R=r(S),C=n(4),L=i(C),k=function(t,e){var n=void 0;try{n=t.getContext("webgl")||t.getContext("experimental-webgl"),POLY.gl=n,POLY.GL.init(n)}catch(t){}n||console.warn("Could not initialise WebGL")};e.init=k,e.Program=s.default,e.GL=p.default,e.GLExtensions=L.default,e.utils=R,e.Texture=v.default,e.DataTexture=g.default,e.CONST=O.default,e.cameras=y.default,e.control=E.default,e.State=M.default,e.geometry=l.default,e.FrameBuffer=d.default,e.helpers=P.default,e.loaders=u.default,t.POLY=e}).call(e,function(){return this}())},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";function r(t){e.ARRAY_TYPE=a=t}function i(t){return t*u}function o(t,e){return Math.abs(t-e)<=s*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=r,e.toRadian=i,e.equals=o;var s=e.EPSILON=1e-6,a=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,u=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new j.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function s(t){var e=new j.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,n,r,i,o,s,a,u){var c=new j.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=s,c[7]=a,c[8]=u,c}function c(t,e,n,r,i,o,s,a,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=c,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function h(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function d(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=l*s-a*c,d=-l*o+a*u,f=c*o-s*u,p=n*h+r*d+i*f;return p?(p=1/p,t[0]=h*p,t[1]=(-l*r+i*c)*p,t[2]=(a*r-i*s)*p,t[3]=d*p,t[4]=(l*n-i*u)*p,t[5]=(-a*n+i*o)*p,t[6]=f*p,t[7]=(-c*n+r*u)*p,t[8]=(s*n-r*o)*p,t):null}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8];return t[0]=s*l-a*c,t[1]=i*c-r*l,t[2]=r*a-i*s,t[3]=a*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*a,t[6]=o*c-s*u,t[7]=r*u-n*c,t[8]=n*s-r*o,t}function p(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return e*(c*o-s*u)+n*(-c*i+s*a)+r*(u*i-o*a)}function _(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=n[0],f=n[1],p=n[2],_=n[3],v=n[4],m=n[5],g=n[6],b=n[7],y=n[8];return t[0]=d*r+f*s+p*c,t[1]=d*i+f*a+p*l,t[2]=d*o+f*u+p*h,t[3]=_*r+v*s+m*c,t[4]=_*i+v*a+m*l,t[5]=_*o+v*u+m*h,t[6]=g*r+b*s+y*c,t[7]=g*i+b*a+y*l,t[8]=g*o+b*u+y*h,t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=d*r+f*s+c,t[7]=d*i+f*a+l,t[8]=d*o+f*u+h,t}function m(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*r+d*s,t[1]=f*i+d*a,t[2]=f*o+d*u,t[3]=f*s-d*r,t[4]=f*a-d*i,t[5]=f*u-d*o,t[6]=c,t[7]=l,t[8]=h,t}function g(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function y(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function E(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function w(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,u=i+i,c=n*s,l=r*s,h=r*a,d=i*s,f=i*a,p=i*u,_=o*s,v=o*a,m=o*u;return t[0]=1-h-p,t[3]=l-m,t[6]=d+v,t[1]=l+m,t[4]=1-c-p,t[7]=f-_,t[2]=d-v,t[5]=f+_,t[8]=1-c-h,t}function M(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],f=e[11],p=e[12],_=e[13],v=e[14],m=e[15],g=n*a-r*s,b=n*u-i*s,y=n*c-o*s,x=r*u-i*a,E=r*c-o*a,w=i*c-o*u,M=l*_-h*p,T=l*v-d*p,O=l*m-f*p,A=h*v-d*_,P=h*m-f*_,S=d*m-f*v,R=g*S-b*P+y*A+x*O-E*T+w*M;return R?(R=1/R,t[0]=(a*S-u*P+c*A)*R,t[1]=(u*O-s*S-c*T)*R,t[2]=(s*P-a*O+c*M)*R,t[3]=(i*P-r*S-o*A)*R,t[4]=(n*S-i*O+o*T)*R,t[5]=(r*O-n*P-o*M)*R,t[6]=(_*w-v*E+m*x)*R,t[7]=(v*y-p*w-m*b)*R,t[8]=(p*E-_*y+m*g)*R,t):null}function T(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function O(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function A(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function P(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function S(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function R(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function C(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function k(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=e[0],d=e[1],f=e[2],p=e[3],_=e[4],v=e[5],m=e[6],g=e[7],b=e[8];return Math.abs(n-h)<=j.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=j.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-f)<=j.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=j.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-_)<=j.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-v)<=j.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-m)<=j.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-g)<=j.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-b)<=j.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.fromMat4=o,e.clone=s,e.copy=a,e.fromValues=u,e.set=c,e.identity=l,e.transpose=h,e.invert=d,e.adjoint=f,e.determinant=p,e.multiply=_,e.translate=v,e.rotate=m,e.scale=g,e.fromTranslation=b,e.fromRotation=y,e.fromScaling=x,e.fromMat2d=E,e.fromQuat=w,e.normalFromMat4=M,e.projection=T,e.str=O,e.frob=A,e.add=P,e.subtract=S,e.multiplyScalar=R,e.multiplyScalarAndAdd=C,e.exactEquals=L,e.equals=k;var N=n(0),j=r(N);e.mul=_,e.sub=S},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new q.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function o(t){var e=new q.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function a(t,e,n){var r=new q.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function h(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function d(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function _(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function y(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function E(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function w(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function M(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function O(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function A(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function P(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],u=n[2];return t[0]=i*u-o*a,t[1]=o*s-r*u,t[2]=r*a-i*s,t}function S(t,e,n,r){var i=e[0],o=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t}function R(t,e,n,r,i,o){var s=o*o,a=s*(2*o-3)+1,u=s*(o-2)+o,c=s*(o-1),l=s*(3-2*o);return t[0]=e[0]*a+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*a+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*a+n[2]*u+r[2]*c+i[2]*l,t}function C(t,e,n,r,i,o){var s=1-o,a=s*s,u=o*o,c=a*s,l=3*o*a,h=3*u*s,d=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*h+i[0]*d,t[1]=e[1]*c+n[1]*l+r[1]*h+i[1]*d,t[2]=e[2]*c+n[2]*l+r[2]*h+i[2]*d,t}function L(t,e){e=e||1;var n=2*q.RANDOM()*Math.PI,r=2*q.RANDOM()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function k(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function N(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function j(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*r+a*o-u*i,h=c*i+u*r-s*o,d=c*o+s*i-a*r,f=-s*r-a*i-u*o;return t[0]=l*c+f*-s+h*-u-d*-a,t[1]=h*c+f*-a+d*-s-l*-u,t[2]=d*c+f*-u+l*-a-h*-s,t}function D(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function I(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function U(t,e){var n=a(t[0],t[1],t[2]),r=a(e[0],e[1],e[2]);O(n,n),O(r,r);var i=A(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function B(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function X(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Y(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2];return Math.abs(n-o)<=q.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=q.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-a)<=q.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=o,e.length=s,e.fromValues=a,e.copy=u,e.set=c,e.add=l,e.subtract=h,e.multiply=d,e.divide=f,e.ceil=p,e.floor=_,e.min=v,e.max=m,e.round=g,e.scale=b,e.scaleAndAdd=y,e.distance=x,e.squaredDistance=E,e.squaredLength=w,e.negate=M,e.inverse=T,e.normalize=O,e.dot=A,e.cross=P,e.lerp=S,e.hermite=R,e.bezier=C,e.random=L,e.transformMat4=k,e.transformMat3=N,e.transformQuat=j,e.rotateX=D,e.rotateY=F,e.rotateZ=I,e.angle=U,e.str=B,e.exactEquals=X,e.equals=Y;var z=n(0),q=r(z);e.sub=h,e.mul=d,e.div=f,e.dist=x,e.sqrDist=E,e.len=s,e.sqrLen=w,e.forEach=function(){var t=i();return function(e,n,r,i,o,s){var a=void 0,u=void 0;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new D.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function o(t){var e=new D.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e,n,r){var i=new D.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function _(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function y(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function E(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function w(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function M(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function O(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*s),t}function A(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function P(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t[3]=a+r*(n[3]-a),t}function S(t,e){return e=e||1,t[0]=D.RANDOM(),t[1]=D.RANDOM(),t[2]=D.RANDOM(),t[3]=D.RANDOM(),O(t,t),g(t,t,e),t}function R(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}function C(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*r+a*o-u*i,h=c*i+u*r-s*o,d=c*o+s*i-a*r,f=-s*r-a*i-u*o;return t[0]=l*c+f*-s+h*-u-d*-a,t[1]=h*c+f*-a+d*-s-l*-u,t[2]=d*c+f*-u+l*-a-h*-s,t[3]=e[3],t}function L(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function N(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=D.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=D.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=o,e.fromValues=s,e.copy=a,e.set=u,e.add=c,e.subtract=l,e.multiply=h,e.divide=d,e.ceil=f,e.floor=p,e.min=_,e.max=v,e.round=m,e.scale=g,e.scaleAndAdd=b,e.distance=y,e.squaredDistance=x,e.length=E,e.squaredLength=w,e.negate=M,e.inverse=T,e.normalize=O,e.dot=A,e.lerp=P,e.random=S,e.transformMat4=R,e.transformQuat=C,e.str=L,e.exactEquals=k,e.equals=N;var j=n(0),D=r(j);e.sub=l,e.mul=h,e.div=d,e.dist=y,e.sqrDist=x,e.len=E,e.sqrLen=w,e.forEach=function(){var t=i();return function(e,n,r,i,o,s){var a=void 0,u=void 0;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var i=n(0),o=r(i),s=n(5),a=r(s),u=n(6),c=r(u),l=n(1),h=r(l),d=n(7),f=r(d),p=n(8),_=r(p),v=n(9),m=r(v),g=n(2),b=r(g),y=n(3),x=r(y);e.glMatrix=o,e.mat2=a,e.mat2d=c,e.mat3=h,e.mat4=f,e.quat=_,e.vec2=m,e.vec3=b,e.vec4=x},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new S.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t){var e=new S.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n,r){var i=new S.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function c(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function l(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*o-i*r;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t):null}function d(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function f(t){return t[0]*t[3]-t[2]*t[1]}function p(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*a+o*u,t[1]=i*a+s*u,t[2]=r*c+o*l,t[3]=i*c+s*l,t}function _(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*a,t[1]=i*u+s*a,t[2]=r*-a+o*u,t[3]=i*-a+s*u,t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],u=n[1];return t[0]=r*a,t[1]=i*a,t[2]=o*u,t[3]=s*u,t}function m(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function b(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function x(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function E(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function w(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function M(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function T(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=S.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=S.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=S.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=S.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}function O(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function A(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=o,e.copy=s,e.identity=a,e.fromValues=u,e.set=c,e.transpose=l,e.invert=h,e.adjoint=d,e.determinant=f,e.multiply=p,e.rotate=_,e.scale=v,e.fromRotation=m,e.fromScaling=g,e.str=b,e.frob=y,e.LDU=x,e.add=E,e.subtract=w,e.exactEquals=M,e.equals=T,e.multiplyScalar=O,e.multiplyScalarAndAdd=A;var P=n(0),S=r(P);e.mul=p,e.sub=w},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new P.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t){var e=new P.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function u(t,e,n,r,i,o){var s=new P.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=o,s}function c(t,e,n,r,i,o,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t}function l(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*a-o*s)*u,t[5]=(r*s-n*a)*u,t):null}function h(t){return t[0]*t[3]-t[1]*t[2]}function d(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1],h=n[2],d=n[3],f=n[4],p=n[5];return t[0]=r*c+o*l,t[1]=i*c+s*l,t[2]=r*h+o*d,t[3]=i*h+s*d,t[4]=r*f+o*p+a,t[5]=i*f+s*p+u,t}function f(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=i*l+s*c,t[2]=r*-c+o*l,t[3]=i*-c+s*l,t[4]=a,t[5]=u,t}function p(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*l,t[3]=s*l,t[4]=a,t[5]=u,t}function _(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=r*c+o*l+a,t[5]=i*c+s*l+u,t}function v(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function m(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function g(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function b(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function x(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function E(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function w(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function M(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function T(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function O(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=e[0],c=e[1],l=e[2],h=e[3],d=e[4],f=e[5];return Math.abs(n-u)<=P.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=P.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=P.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-h)<=P.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-d)<=P.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-f)<=P.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=o,e.copy=s,e.identity=a,e.fromValues=u,e.set=c,e.invert=l,e.determinant=h,e.multiply=d,e.rotate=f,e.scale=p,e.translate=_,e.fromRotation=v,e.fromScaling=m,e.fromTranslation=g,e.str=b,e.frob=y,e.add=x,e.subtract=E,e.multiplyScalar=w,e.multiplyScalarAndAdd=M,e.exactEquals=T,e.equals=O;var A=n(0),P=r(A);e.mul=d,e.sub=E},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new J.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t){var e=new J.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,_){var v=new J.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=s,v[7]=a,v[8]=u,v[9]=c,v[10]=l,v[11]=h,v[12]=d,v[13]=f,v[14]=p,v[15]=_,v}function u(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p,_,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=d,t[12]=f,t[13]=p,t[14]=_,t[15]=v,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],f=e[11],p=e[12],_=e[13],v=e[14],m=e[15],g=n*a-r*s,b=n*u-i*s,y=n*c-o*s,x=r*u-i*a,E=r*c-o*a,w=i*c-o*u,M=l*_-h*p,T=l*v-d*p,O=l*m-f*p,A=h*v-d*_,P=h*m-f*_,S=d*m-f*v,R=g*S-b*P+y*A+x*O-E*T+w*M;return R?(R=1/R,t[0]=(a*S-u*P+c*A)*R,t[1]=(i*P-r*S-o*A)*R,t[2]=(_*w-v*E+m*x)*R,t[3]=(d*E-h*w-f*x)*R,t[4]=(u*O-s*S-c*T)*R,t[5]=(n*S-i*O+o*T)*R,t[6]=(v*y-p*w-m*b)*R,t[7]=(l*w-d*y+f*b)*R,t[8]=(s*P-a*O+c*M)*R,t[9]=(r*O-n*P-o*M)*R,t[10]=(p*E-_*y+m*g)*R,t[11]=(h*y-l*E-f*g)*R,t[12]=(a*T-s*A-u*M)*R,t[13]=(n*A-r*T+i*M)*R,t[14]=(_*b-p*x-v*g)*R,t[15]=(l*x-h*b+d*g)*R,t):null}function d(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],f=e[11],p=e[12],_=e[13],v=e[14],m=e[15];return t[0]=a*(d*m-f*v)-h*(u*m-c*v)+_*(u*f-c*d),t[1]=-(r*(d*m-f*v)-h*(i*m-o*v)+_*(i*f-o*d)),t[2]=r*(u*m-c*v)-a*(i*m-o*v)+_*(i*c-o*u),t[3]=-(r*(u*f-c*d)-a*(i*f-o*d)+h*(i*c-o*u)),t[4]=-(s*(d*m-f*v)-l*(u*m-c*v)+p*(u*f-c*d)),t[5]=n*(d*m-f*v)-l*(i*m-o*v)+p*(i*f-o*d),t[6]=-(n*(u*m-c*v)-s*(i*m-o*v)+p*(i*c-o*u)),t[7]=n*(u*f-c*d)-s*(i*f-o*d)+l*(i*c-o*u),t[8]=s*(h*m-f*_)-l*(a*m-c*_)+p*(a*f-c*h),t[9]=-(n*(h*m-f*_)-l*(r*m-o*_)+p*(r*f-o*h)),t[10]=n*(a*m-c*_)-s*(r*m-o*_)+p*(r*c-o*a),t[11]=-(n*(a*f-c*h)-s*(r*f-o*h)+l*(r*c-o*a)),t[12]=-(s*(h*v-d*_)-l*(a*v-u*_)+p*(a*d-u*h)),t[13]=n*(h*v-d*_)-l*(r*v-i*_)+p*(r*d-i*h),t[14]=-(n*(a*v-u*_)-s*(r*v-i*_)+p*(r*u-i*a)),t[15]=n*(a*d-u*h)-s*(r*d-i*h)+l*(r*u-i*a),t}function f(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],d=t[11],f=t[12],p=t[13],_=t[14],v=t[15],m=e*s-n*o,g=e*a-r*o,b=e*u-i*o,y=n*a-r*s,x=n*u-i*s,E=r*u-i*a,w=c*p-l*f,M=c*_-h*f,T=c*v-d*f,O=l*_-h*p,A=l*v-d*p,P=h*v-d*_;
return m*P-g*A+b*O+y*T-x*M+E*w}function p(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=e[9],f=e[10],p=e[11],_=e[12],v=e[13],m=e[14],g=e[15],b=n[0],y=n[1],x=n[2],E=n[3];return t[0]=b*r+y*a+x*h+E*_,t[1]=b*i+y*u+x*d+E*v,t[2]=b*o+y*c+x*f+E*m,t[3]=b*s+y*l+x*p+E*g,b=n[4],y=n[5],x=n[6],E=n[7],t[4]=b*r+y*a+x*h+E*_,t[5]=b*i+y*u+x*d+E*v,t[6]=b*o+y*c+x*f+E*m,t[7]=b*s+y*l+x*p+E*g,b=n[8],y=n[9],x=n[10],E=n[11],t[8]=b*r+y*a+x*h+E*_,t[9]=b*i+y*u+x*d+E*v,t[10]=b*o+y*c+x*f+E*m,t[11]=b*s+y*l+x*p+E*g,b=n[12],y=n[13],x=n[14],E=n[15],t[12]=b*r+y*a+x*h+E*_,t[13]=b*i+y*u+x*d+E*v,t[14]=b*o+y*c+x*f+E*m,t[15]=b*s+y*l+x*p+E*g,t}function _(t,e,n){var r=n[0],i=n[1],o=n[2],s=void 0,a=void 0,u=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=void 0,p=void 0,_=void 0,v=void 0,m=void 0;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(s=e[0],a=e[1],u=e[2],c=e[3],l=e[4],h=e[5],d=e[6],f=e[7],p=e[8],_=e[9],v=e[10],m=e[11],t[0]=s,t[1]=a,t[2]=u,t[3]=c,t[4]=l,t[5]=h,t[6]=d,t[7]=f,t[8]=p,t[9]=_,t[10]=v,t[11]=m,t[12]=s*r+l*i+p*o+e[12],t[13]=a*r+h*i+_*o+e[13],t[14]=u*r+d*i+v*o+e[14],t[15]=c*r+f*i+m*o+e[15]),t}function v(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function m(t,e,n,r){var i=r[0],o=r[1],s=r[2],a=Math.sqrt(i*i+o*o+s*s),u=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=void 0,p=void 0,_=void 0,v=void 0,m=void 0,g=void 0,b=void 0,y=void 0,x=void 0,E=void 0,w=void 0,M=void 0,T=void 0,O=void 0,A=void 0,P=void 0,S=void 0,R=void 0,C=void 0;return Math.abs(a)<J.EPSILON?null:(a=1/a,i*=a,o*=a,s*=a,u=Math.sin(n),c=Math.cos(n),l=1-c,h=e[0],d=e[1],f=e[2],p=e[3],_=e[4],v=e[5],m=e[6],g=e[7],b=e[8],y=e[9],x=e[10],E=e[11],w=i*i*l+c,M=o*i*l+s*u,T=s*i*l-o*u,O=i*o*l-s*u,A=o*o*l+c,P=s*o*l+i*u,S=i*s*l+o*u,R=o*s*l-i*u,C=s*s*l+c,t[0]=h*w+_*M+b*T,t[1]=d*w+v*M+y*T,t[2]=f*w+m*M+x*T,t[3]=p*w+g*M+E*T,t[4]=h*O+_*A+b*P,t[5]=d*O+v*A+y*P,t[6]=f*O+m*A+x*P,t[7]=p*O+g*A+E*P,t[8]=h*S+_*R+b*C,t[9]=d*S+v*R+y*C,t[10]=f*S+m*R+x*C,t[11]=p*S+g*R+E*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=s*i+l*r,t[6]=a*i+h*r,t[7]=u*i+d*r,t[8]=c*i-o*r,t[9]=l*i-s*r,t[10]=h*i-a*r,t[11]=d*i-u*r,t}function b(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],c=e[8],l=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=s*i-l*r,t[2]=a*i-h*r,t[3]=u*i-d*r,t[8]=o*r+c*i,t[9]=s*r+l*i,t[10]=a*r+h*i,t[11]=u*r+d*i,t}function y(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=s*i+l*r,t[2]=a*i+h*r,t[3]=u*i+d*r,t[4]=c*i-o*r,t[5]=l*i-s*r,t[6]=h*i-a*r,t[7]=d*i-u*r,t}function x(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function E(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e,n){var r=n[0],i=n[1],o=n[2],s=Math.sqrt(r*r+i*i+o*o),a=void 0,u=void 0,c=void 0;return Math.abs(s)<J.EPSILON?null:(s=1/s,r*=s,i*=s,o*=s,a=Math.sin(e),u=Math.cos(e),c=1-u,t[0]=r*r*c+u,t[1]=i*r*c+o*a,t[2]=o*r*c-i*a,t[3]=0,t[4]=r*i*c-o*a,t[5]=i*i*c+u,t[6]=o*i*c+r*a,t[7]=0,t[8]=r*o*c+i*a,t[9]=i*o*c-r*a,t[10]=o*o*c+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function M(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=r+r,u=i+i,c=o+o,l=r*a,h=r*u,d=r*c,f=i*u,p=i*c,_=o*c,v=s*a,m=s*u,g=s*c;return t[0]=1-(f+_),t[1]=h+g,t[2]=d-m,t[3]=0,t[4]=h-g,t[5]=1-(l+_),t[6]=p+v,t[7]=0,t[8]=d+m,t[9]=p-v,t[10]=1-(l+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function P(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],s=e[5],a=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+s*s+a*a),t[2]=Math.sqrt(u*u+c*c+l*l),t}function R(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function C(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3],u=i+i,c=o+o,l=s+s,h=i*u,d=i*c,f=i*l,p=o*c,_=o*l,v=s*l,m=a*u,g=a*c,b=a*l,y=r[0],x=r[1],E=r[2];return t[0]=(1-(p+v))*y,t[1]=(d+b)*y,t[2]=(f-g)*y,t[3]=0,t[4]=(d-b)*x,t[5]=(1-(h+v))*x,t[6]=(_+m)*x,t[7]=0,t[8]=(f+g)*E,t[9]=(_-m)*E,t[10]=(1-(h+p))*E,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function L(t,e,n,r,i){var o=e[0],s=e[1],a=e[2],u=e[3],c=o+o,l=s+s,h=a+a,d=o*c,f=o*l,p=o*h,_=s*l,v=s*h,m=a*h,g=u*c,b=u*l,y=u*h,x=r[0],E=r[1],w=r[2],M=i[0],T=i[1],O=i[2];return t[0]=(1-(_+m))*x,t[1]=(f+y)*x,t[2]=(p-b)*x,t[3]=0,t[4]=(f-y)*E,t[5]=(1-(d+m))*E,t[6]=(v+g)*E,t[7]=0,t[8]=(p+b)*w,t[9]=(v-g)*w,t[10]=(1-(d+_))*w,t[11]=0,t[12]=n[0]+M-(t[0]*M+t[4]*T+t[8]*O),t[13]=n[1]+T-(t[1]*M+t[5]*T+t[9]*O),t[14]=n[2]+O-(t[2]*M+t[6]*T+t[10]*O),t[15]=1,t}function k(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,u=i+i,c=n*s,l=r*s,h=r*a,d=i*s,f=i*a,p=i*u,_=o*s,v=o*a,m=o*u;return t[0]=1-h-p,t[1]=l+m,t[2]=d-v,t[3]=0,t[4]=l-m,t[5]=1-c-p,t[6]=f+_,t[7]=0,t[8]=d+v,t[9]=f-_,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,e,n,r,i,o,s){var a=1/(n-e),u=1/(i-r),c=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*u,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0,t}function j(t,e,n,r,i){var o=1/Math.tan(e/2),s=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*s,t[15]=0,t}function D(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+a),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((s-a)*u*.5),t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function F(t,e,n,r,i,o,s){var a=1/(e-n),u=1/(r-i),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(s+o)*c,t[15]=1,t}function I(t,e,n,r){var i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=void 0,p=e[0],_=e[1],v=e[2],m=r[0],g=r[1],b=r[2],y=n[0],x=n[1],E=n[2];return Math.abs(p-y)<J.EPSILON&&Math.abs(_-x)<J.EPSILON&&Math.abs(v-E)<J.EPSILON?mat4.identity(t):(l=p-y,h=_-x,d=v-E,f=1/Math.sqrt(l*l+h*h+d*d),l*=f,h*=f,d*=f,i=g*d-b*h,o=b*l-m*d,s=m*h-g*l,f=Math.sqrt(i*i+o*o+s*s),f?(f=1/f,i*=f,o*=f,s*=f):(i=0,o=0,s=0),a=h*s-d*o,u=d*i-l*s,c=l*o-h*i,f=Math.sqrt(a*a+u*u+c*c),f?(f=1/f,a*=f,u*=f,c*=f):(a=0,u=0,c=0),t[0]=i,t[1]=a,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*p+o*_+s*v),t[13]=-(a*p+u*_+c*v),t[14]=-(l*p+h*_+d*v),t[15]=1,t)}function U(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=r[0],u=r[1],c=r[2],l=i-n[0],h=o-n[1],d=s-n[2],f=l*l+h*h+d*d;f>0&&(f=1/Math.sqrt(f),l*=f,h*=f,d*=f);var p=u*d-c*h,_=c*l-a*d,v=a*h-u*l;return t[0]=p,t[1]=_,t[2]=v,t[3]=0,t[4]=h*v-d*_,t[5]=d*p-l*v,t[6]=l*_-h*p,t[7]=0,t[8]=l,t[9]=h,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t}function B(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function X(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Y(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function z(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function q(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function H(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function G(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=t[9],d=t[10],f=t[11],p=t[12],_=t[13],v=t[14],m=t[15],g=e[0],b=e[1],y=e[2],x=e[3],E=e[4],w=e[5],M=e[6],T=e[7],O=e[8],A=e[9],P=e[10],S=e[11],R=e[12],C=e[13],L=e[14],k=e[15];return Math.abs(n-g)<=J.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=J.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-y)<=J.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(o-x)<=J.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-E)<=J.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(a-w)<=J.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-M)<=J.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-T)<=J.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(l-O)<=J.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(h-A)<=J.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-P)<=J.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(f-S)<=J.EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(p-R)<=J.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(_-C)<=J.EPSILON*Math.max(1,Math.abs(_),Math.abs(C))&&Math.abs(v-L)<=J.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(m-k)<=J.EPSILON*Math.max(1,Math.abs(m),Math.abs(k))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=o,e.copy=s,e.fromValues=a,e.set=u,e.identity=c,e.transpose=l,e.invert=h,e.adjoint=d,e.determinant=f,e.multiply=p,e.translate=_,e.scale=v,e.rotate=m,e.rotateX=g,e.rotateY=b,e.rotateZ=y,e.fromTranslation=x,e.fromScaling=E,e.fromRotation=w,e.fromXRotation=M,e.fromYRotation=T,e.fromZRotation=O,e.fromRotationTranslation=A,e.getTranslation=P,e.getScaling=S,e.getRotation=R,e.fromRotationTranslationScale=C,e.fromRotationTranslationScaleOrigin=L,e.fromQuat=k,e.frustum=N,e.perspective=j,e.perspectiveFromFieldOfView=D,e.ortho=F,e.lookAt=I,e.targetTo=U,e.str=B,e.frob=X,e.add=Y,e.subtract=z,e.multiplyScalar=q,e.multiplyScalarAndAdd=H,e.exactEquals=V,e.equals=G;var W=n(0),J=r(W);e.mul=p,e.sub=z},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new y.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function a(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function u(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+s*a+i*c-o*u,t[1]=i*l+s*u+o*a-r*c,t[2]=o*l+s*c+r*u-i*a,t[3]=s*l-r*a-i*u-o*c,t}function c(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*a,t[1]=i*u+o*a,t[2]=o*u-i*a,t[3]=s*u-r*a,t}function l(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*a,t[1]=i*u+s*a,t[2]=o*u+r*a,t[3]=s*u-i*a,t}function h(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*a,t[1]=i*u-r*a,t[2]=o*u+s*a,t[3]=s*u-o*a,t}function d(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function f(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3],u=n[0],c=n[1],l=n[2],h=n[3],d=void 0,f=void 0,p=void 0,_=void 0,v=void 0;return f=i*u+o*c+s*l+a*h,f<0&&(f=-f,u=-u,c=-c,l=-l,h=-h),1-f>1e-6?(d=Math.acos(f),p=Math.sin(d),_=Math.sin((1-r)*d)/p,v=Math.sin(r*d)/p):(_=1-r,v=r),t[0]=_*i+v*u,t[1]=_*o+v*c,t[2]=_*s+v*l,t[3]=_*a+v*h,t}function p(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=o*a,t}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function v(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*s+s]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+s]-e[3*s+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[s]=(e[3*s+i]+e[3*i+s])*r}return t}function m(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),s=Math.cos(e),a=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*u*l-s*a*c,t[1]=s*a*l+o*u*c,t[2]=s*u*c-o*a*l,t[3]=s*u*l+o*a*c,t}function g(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=i,e.identity=o,e.setAxisAngle=s,e.getAxisAngle=a,e.multiply=u,e.rotateX=c,e.rotateY=l,e.rotateZ=h,e.calculateW=d,e.slerp=f,e.invert=p,e.conjugate=_,e.fromMat3=v,e.fromEuler=m,e.str=g;var b=n(0),y=r(b),x=n(1),E=r(x),w=n(2),M=r(w),T=n(3),O=r(T),A=(e.clone=O.clone,e.fromValues=O.fromValues,e.copy=O.copy,e.set=O.set,e.add=O.add,e.mul=u,e.scale=O.scale,e.dot=O.dot,e.lerp=O.lerp,e.length=O.length),P=(e.len=A,e.squaredLength=O.squaredLength),S=(e.sqrLen=P,e.normalize=O.normalize);e.exactEquals=O.exactEquals,e.equals=O.equals,e.rotationTo=function(){var t=M.create(),e=M.fromValues(1,0,0),n=M.fromValues(0,1,0);return function(r,i,o){var a=M.dot(i,o);return a<-.999999?(M.cross(t,e,i),M.len(t)<1e-6&&M.cross(t,n,i),M.normalize(t,t),s(r,t,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(M.cross(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,S(r,r))}}(),e.sqlerp=function(){var t=i(),e=i();return function(n,r,i,o,s,a){return f(t,r,s,a),f(e,i,o,a),f(n,t,e,2*a*(1-a)),n}}(),e.setAxes=function(){var t=E.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],S(e,v(e,t))}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new U.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function o(t){var e=new U.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function s(t,e){var n=new U.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function a(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function _(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function y(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function E(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function w(t){var e=t[0],n=t[1];return e*e+n*n}function M(t,e){return t[0]=-e[0],t[1]=-e[1],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function O(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function A(t,e){return t[0]*e[0]+t[1]*e[1]}function P(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function S(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function R(t,e){e=e||1;var n=2*U.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function C(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function L(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function k(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function N(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function j(t){return"vec2("+t[0]+", "+t[1]+")"}function D(t,e){return t[0]===e[0]&&t[1]===e[1]}function F(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=U.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=U.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=i,e.clone=o,e.fromValues=s,e.copy=a,e.set=u,e.add=c,e.subtract=l,e.multiply=h,e.divide=d,e.ceil=f,e.floor=p,e.min=_,e.max=v,e.round=m,e.scale=g,e.scaleAndAdd=b,e.distance=y,e.squaredDistance=x,e.length=E,e.squaredLength=w,e.negate=M,e.inverse=T,e.normalize=O,e.dot=A,e.cross=P,e.lerp=S,e.random=R,e.transformMat2=C,e.transformMat2d=L,e.transformMat3=k,e.transformMat4=N,e.str=j,e.exactEquals=D,e.equals=F;var I=n(0),U=r(I);e.len=E,e.sub=l,e.mul=h,e.div=d,e.dist=y,e.sqrDist=x,e.sqrLen=w,e.forEach=function(){var t=i();return function(e,n,r,i,o,s){var a=void 0,u=void 0;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}()}])})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(12);e.default=new(function(){function t(){r(this,t),this.extensions={}}return i(t,[{key:"init",value:function(){for(var t=POLY.gl,e=0;e<o.extensions.length;e++)this.extensions[o.extensions[e]]=t.getExtension(o.extensions[e])}},{key:"checkExtension",value:function(t){return!!this.extensions[t]}},{key:"getExtension",value:function(t){return this.extensions[t]}}]),t}()),t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=0,o=1,s=2,a=3,u=4,c=function(){function t(e){n(this,t),this.gl=e,this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.data=0,this.blendMode=0,this.blendModes={source:{alpha:this.gl.SRC_ALPHA},dest:{one:this.gl.ONE}}}return r(t,[{key:"setState",value:function(t){this.setBlend(t.activeState[i]),this.setDepthTest(t.activeState[o]),this.setFrontFace(t.activeState[s]),this.setCullFace(t.activeState[a]),this.setBlendMode(t.activeState[u])}},{key:"setBlend",value:function(t){t=t?1:0,this.activeState[i]!==t&&(this.activeState[i]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))}},{key:"setBlendMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alpha",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"one";t!==this.activeState[u]&&(this.activeState[u]=t,this.gl.blendFunc(this.blendModes.source[e],this.blendModes.dest[n]))}},{key:"setDepthTest",value:function(t){t=t?1:0,this.activeState[o]!==t&&(this.activeState[o]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))}},{key:"setCullFace",value:function(t){t=t?1:0,this.activeState[a]!==t&&(this.activeState[a]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))}},{key:"setFrontFace",value:function(t){t=t?1:0,this.activeState[s]!==t&&(this.activeState[s]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))}},{key:"blend",get:function(){return this.activeState[i]},set:function(t){this.activeState[i]=t}},{key:"culling",get:function(){return this.activeState[CULLING]},set:function(t){this.activeState[CULLING]=t}},{key:"depthTest",get:function(){return this.activeState[o]},set:function(t){this.activeState[o]=t}},{key:"clockwiseFrontFace",get:function(){return this.activeState[s]},set:function(t){this.activeState[s]=t}},{key:"blendMode",get:function(){return this.activeState[u]},set:function(t){this.activeState[u]=t}}]),t}();e.default=c,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){n(this,t),this.indexUniq=0,this.middlePointIndexCache={},this.vertices=[],this.isNormalised=!0}return r(t,[{key:"multiplyTriangles",value:function(t,e,n){this.indexUniq=n.length,this.vertices=n;var r=e.slice();this.isNormalised=!0;for(var i=0;i<this.vertices.length&&this.isNormalised;i++)for(var o=0;o<this.vertices[i].length;o++)Math.abs(this.vertices[i][o])>1&&(this.isNormalised=!1);for(var i=0;i<t;i++){for(var s=[],o=0;o<r.length;o++){var a=r[o],u=this.getMiddlePoint(a[0],a[1]),c=this.getMiddlePoint(a[1],a[2]),l=this.getMiddlePoint(a[2],a[0]);s.push([a[0],u,l]),s.push([a[1],c,u]),s.push([a[2],c,l]),s.push([u,c,l])}r=s.slice()}return r}},{key:"addVertex",value:function(t){var e=this.isNormalised?Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]):1;return this.vertices.push([t[0]/e,t[1]/e,t[2]/e]),this.indexUniq++}},{key:"getMiddlePoint",value:function(t,e){var n=t<e,r=n?t:e,i=n?e:t,o=(r<<32)+i,s=this.vertices[t],a=this.vertices[e],u=[(s[0]+a[0])/2,(s[1]+a[1])/2,(s[2]+a[2])/2],c=this.addVertex(u);return this.middlePointIndexCache[o]=c,c}}]),t}();e.default=new i,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){n(this,t)}return r(t,[{key:"separate",value:function(t,e){for(var n=[],r=[],i=0;i<t.length;i++)n.push(t[i][0],t[i][1],t[i][2]),r.push(t[i][0],t[i][1],t[i][2]);for(var o=e.slice(),s=[],a=0;a<n.length;a++)s[a]=o[n[a]].slice(),n[a]=a;return{faces:n,vertices:s}}}]),t}();e.default=new i,t.exports=e.default},function(t,e,n){"use strict";function r(t,e,n){if(s.call(this),n=n||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function i(t){return t.toString().replace("object ","")}function o(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}var s=n(9),a=n(10),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null,l=0,h=200,d=204;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},r.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},r.prototype.load=function(t){if(!this.isLoading)if(this.isComplete){if(t){var e=this;setTimeout(function(){t(e)},1)}}else switch(t&&this.once("complete",t),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},r.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var e="is"+t[0].toUpperCase()+t.substring(1);this[e]===!1&&(this[e]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},r.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},r.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=r.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},r.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},r.prototype._createSource=function(t,e,n){n||(n=t+"/"+e.substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=n,r},r.prototype._onError=function(t){this.abort("Failed to load element using "+t.target.nodeName)},r.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},r.prototype._xhrOnError=function(){var t=this.xhr;this.abort(i(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},r.prototype._xhrOnAbort=function(){this.abort(i(this.xhr)+" Request was aborted by the user.")},r.prototype._xdrOnTimeout=function(){this.abort(i(this.xhr)+" Request timed out.")},r.prototype._xhrOnLoad=function(){var t=this.xhr,e="undefined"==typeof t.status?t.status:h;if(!(e===h||e===d||e===l&&t.responseText.length>0))return void this.abort("["+t.status+"]"+t.statusText+":"+t.responseURL);if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(t){return void this.abort("Error trying to parse loaded json:",t)}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(t.responseText,"text/xml")}else{var i=document.createElement("div");i.innerHTML=t.responseText,this.data=i}this.isXml=!0}catch(t){return void this.abort("Error trying to parse loaded xml:",t)}else this.data=t.response||t.responseText;this.complete()},r.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,c||(c=document.createElement("a")),
c.href=t,t=a(c.href,{strictMode:!0});var n=!t.port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this._getExtension()]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this._getExtension()]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?");r!==-1&&(t=t.substring(0,r)),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},r.prototype._getMimeFromXhrType=function(t){switch(t){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},r.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE,"svg+xml":r.LOAD_TYPE.IMAGE},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT},r.setExtensionLoadType=function(t,e){o(r._loadTypeMap,t,e)},r.setExtensionXhrType=function(t,e){o(r._xhrTypeMap,t,e)}},function(t,e,n){"use strict";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)s.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=a?a+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},o.prototype.emit=function(t,e,n,r,i,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){var r=new i(e,n||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.once=function(t,e,n){var r=new i(e,n||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,i){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new r:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||n&&s.context!==n||(0===--this._eventsCount?this._events=new r:delete this._events[o]);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new r:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new r:delete this._events[e])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,t.exports=o},function(t,e){"use strict";t.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(t,e,r){e&&(i[n.q.name][e]=r)}),i}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),a=n(69),u=r(a),c=n(68),l=r(c),h=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t),e=e||u.default,n=n||l.default;var o=POLY.gl;this.gl=o,this.cacheAttributesLocation={},this.cacheUniformsLocation={},this.program=o.createProgram();var s=this._createShader(e,!0),a=this._createShader(n,!1);if(this._attachShaders(s,a),o.linkProgram(this.program),!o.getProgramParameter(this.program,o.LINK_STATUS))throw"Couldn't initialise program";o.useProgram(this.program),this._checkIfBasicMatrices(r),this._createGetterSetterUniforms(r);for(var c in r){this.addUniformLocation(c);var h=r[c].value;this.uniforms[c]=h}this.bind()}return o(t,[{key:"bind",value:function(){this.gl.useProgram(this.program)}},{key:"addUniformLocation",value:function(t){this.cacheUniformsLocation[t]=this.gl.getUniformLocation(this.program,t)}},{key:"getUniformLocation",value:function(t){return void 0!==this.cacheUniformsLocation[t]?this.cacheUniformsLocation[t]:(this.addUniformLocation(t),this.getUniformLocation(t))}},{key:"_checkIfBasicMatrices",value:function(t){for(var e=["projectionMatrix","modelMatrix","viewMatrix"],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]={value:s.mat4.create(),type:"mat4"})}},{key:"_createGetterSetterUniforms",value:function(t){var e=this.gl,n=(this.program,this);this.uniforms=new Proxy(t,{get:function(t,e){return e in t?t[e].value:void console.log("Getting non-existant property '"+e+"'")},set:function(t,r,i){if(!(r in t))return console.log("Setting non-existant property '"+r+"', initial value: "+i),!1;t[r].value=i;var o=t[r].type,s=POLY.CONST.uniformTypes[o];return o.indexOf("mat")===-1?"texture"===o?e[s](n.getUniformLocation(r),i,t[r].index):e[s](n.getUniformLocation(r),i):e[s](n.getUniformLocation(r),!1,i),!0}})}},{key:"addAttributeLocation",value:function(t){void 0===this.cacheAttributesLocation[t]&&(this.cacheAttributesLocation[t]=this.gl.getAttribLocation(this.program,t))}},{key:"getAttributeLocation",value:function(t){return void 0!==this.cacheAttributesLocation[t]?this.cacheAttributesLocation[t]:(this.addAttributeLocation(t),this.getAttributeLocation(t))}},{key:"_attachShaders",value:function(t,e){this.gl.attachShader(this.program,t),this.gl.attachShader(this.program,e)}},{key:"_createShader",value:function(t,e){var n=this.gl,r=void 0;if(r=e?n.createShader(n.VERTEX_SHADER):n.createShader(n.FRAGMENT_SHADER),this.gl.shaderSource(r,t),this.gl.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))throw n.getShaderInfoLog(r);return r}}]),t}();e.default=h,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={uniformTypes:{float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",texture:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},extensions:["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","ANGLE_instanced_arrays","WEBGL_draw_buffers"]},t.exports=e.default},function(t,e){"use strict";function n(t,e){var n=t.getExtension(e);if(!n)return!1;console.log("yo",e);var r=e.split("_")[0],i=new RegExp(r+"$");for(var o in n){var s=n[o];if("function"==typeof s){var a=o.replace(i,"");o.substring&&(t[a]=n[o].bind(n))}}return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){_&&f&&(_=!1,f.length?p=f.concat(p):v=-1,p.length&&a())}function a(){if(!_){var t=i(s);_=!0;for(var e=p.length;e;){for(f=p,p=[];++v<e;)f&&f[v].run();v=-1,e=p.length}f=null,_=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var f,p=[],_=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||_||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){"use strict";function n(){}function r(t,e,n){var r=0,i=t.length;!function o(s){return s||r===i?void(n&&n(s)):void e(t[r++],o)}()}function i(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function o(t,e){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())return void setTimeout(function(){a.drain()},1);var i={data:t,callback:"function"==typeof r?r:n};e?a._tasks.unshift(i):a._tasks.push(i),setTimeout(function(){a.process()},1)}function o(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){a.drain=n,a._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),t(e.data,i(o(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}t.exports={eachSeries:r,queue:o}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(2),a=i(s),u=n(17),c=r(u),l=n(20),h=n(26);r(h);window.console.log=function(){};var d=n(67);window.ASSET_URL="../../assets/";var f=function(){function t(){o(this,t);document.getElementById("canvas");this.gl=a.gl,this.gl.clearColor(0,0,0,1),this.loader=new l.Loader,this.loader.addManifest(d.default,window.ASSET_URL),this.loader.onComplete.add(this._loadComplete,this),this.loader.load()}return t.prototype._loadComplete=function(t){a.loadedResources=t,this.scene=new c.default,this.scene.resize(),a.utils.loop.add(this._update.bind(this))},t.prototype.resize=function(){a.GL.resize(this.gl.canvas.clientWidth,this.gl.canvas.clientHeight),this.scene&&this.scene.resize()},t.prototype._update=function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.scene.render()},t}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(2),a=i(s),u=n(21),c=r(u),l=n(22),h=r(l),d=n(24),f=r(d),p=n(23),_=r(p),v=n(25),m=r(v),g=(n(3),function(){function t(){o(this,t),this.gl=null,this.tick=0,this.count=0,this.gl=a.gl,this.camera=new a.cameras.PerspectiveCamera,this.camera.perspective(45,a.GL.aspectRatio,.1,100),this.orbitalControl=new a.control.OrbitalControl(this.camera.matrix),a.GL.setCamera(this.camera),this.viewBg=new c.default(window.ASSET_URL+"image/sky_gradient.jpg"),this._bPlanes=new a.helpers.BatchPlanes,this._fboCurrent=new a.FrameBuffer(256,256,!0),this._fboTarget=new a.FrameBuffer(256,256,!0),this._vFBO=new h.default,this._vSave=new f.default,this._vSim=new m.default,this._vRender=new _.default,this._fboCurrent.bind(),this._vSave.render(),this._fboCurrent.unbind(),this._fboTarget.bind(),this._vSave.render(),this._fboTarget.unbind()}return t.prototype.updateFbo=function(){this._fboTarget.bind(),a.gl.clear(0,0,0,1),this._vSim.render(this._fboCurrent.getTexture(1),this._fboCurrent.getTexture(0),this._fboCurrent.getTexture(2)),this._fboTarget.unbind();var t=this._fboCurrent;this._fboCurrent=this._fboTarget,this._fboTarget=t},t.prototype.render=function(){this.orbitalControl.update(),this.tick%10===0&&(this.tick=0),this.updateFbo();this.tick/10;this._vRender.render(this._fboTarget.getTexture(0),this._fboCurrent.getTexture(0),1,this._fboCurrent.getTexture(2))},t.prototype.resize=function(){this.camera.setAspectRatio(a.GL.aspectRatio)},t}());e.default=g,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){n(this,t),this._json={},this._text={}}return t.prototype.addJson=function(t,e){this._json[e]=t},t.prototype.getJson=function(t){return this._json[t]?this._json[t]:(console.warn(t+" not found in Cache"),null)},t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(63),s=r(o),a=n(30),u=r(a),c=n(18),l=r(c),h=n(60),d=r(h),f=n(29),p=r(f),_=function(){function t(){i(this,t),this.crossdomain=!1,this.assetsToLoad=[],window.XDomainRequest&&this.crossdomain?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){},this.ajaxRequest.ontimeout=function(){},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest&&(this.ajaxRequest=new window.XMLHttpRequest),this.ajaxRequest.onload=this._onFileLoaded.bind(this),this.ajaxRequest.onreadystatechange=function(t){},this.fileCount=0,this.filesToLoad=[],this.fontsToLoad=[],this.soundsToLoad=[],this.customToLoad=[],this.onComplete=new s.default,this.onProgress=new s.default}return t.prototype.addFonts=function(t){return this.fontsToLoad=this.fontsToLoad.concat(t),this},t.prototype.addJson=function(e,n){var n=n||u.default.basename(e,u.default.extname(e)),r={url:e,id:n,type:t.JSON};return this.filesToLoad.push(r),this},t.prototype.addAssets=function(t){return this.assetsToLoad=this.assetsToLoad.concat(t),this},t.prototype.addCSS=function(t){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e),this},t.prototype.load=function(){this._loadFonts()},t.prototype._loadFiles=function(){this.fileCount=0,this.filesToLoad.length?this._loadNextFile():this._loadAssets()},t.prototype._loadNextFile=function(){var e=this.filesToLoad[this.fileCount];e.type===t.CUSTOM?(e.object.onLoaded.addOnce(this._onFileLoaded,this),e.object.load()):(this.ajaxRequest.open("GET",e.url,!0),this.ajaxRequest.send())},t.prototype._onFileLoaded=function(){var e=this.filesToLoad[this.fileCount];if(e.type===t.CUSTOM);else if(0===this.ajaxRequest.status||200===this.ajaxRequest.status)switch(e.type){case t.TEXT:var n=this.ajaxRequest.responseText;l.default.addText(n,e.id);break;case t.JSON:var r=JSON.parse(this.ajaxRequest.responseText);l.default.addJson(r,e.id)}else console.warn("Loader: "+e.url+" not found");this.fileCount++,this._onProgress(),this.fileCount===this.filesToLoad.length?this._loadAssets():this._loadNextFile()},t.prototype._getFonts=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].load());return e},t.prototype._loadFonts=function(){var t=this;if(0===this.fontsToLoad.length)return void this._loadFiles();for(var e=[],n=0;n<this.fontsToLoad.length;n++){var r=new p.default(this.fontsToLoad[n]);e.push(r)}Promise.all(this._getFonts(e)).then(function(e){t._loadFiles()},function(){t._loadFiles()})},t.prototype.addManifest=function(t,e){var n=t.map(function(t){return e+t});return this.addAssets(n),this},t.prototype._loadAssets=function(){return 0===this.assetsToLoad.length?void this._onComplete():(this.assetLoader=new d.default,this.assetLoader.add(this.assetsToLoad),this.assetLoader.on("progress",this._onProgress,this),void this.assetLoader.load(this._onComplete.bind(this)))},t.prototype._onComplete=function(t,e){this.onProgress.dispatch(1),this.onComplete.dispatch(e)},t.prototype._onProgress=function(){var t=(this.filesToLoad.length+this.assetsToLoad.length,this.fileCount);this.assetLoader&&(t=this.assetLoader.progress),this.onProgress.dispatch(.01*t)},t}();_.TEXT=0,_.JSON=1,_.CUSTOM=2,e.default=_,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Loader=void 0;var i=n(19),o=r(i);e.Loader=o.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(2),a=i(s),u=n(73),c=r(u),l=n(72),h=r(l),d=function(){function t(e){o(this,t),this.program=new a.Program(c.default,h.default);var n=new a.State(this.program.gl);n.depthTest=!1,this.geom=new a.geometry.Quad(this.program,null,n),this.texture=new a.Texture(e)}return t.prototype.render=function(){this.program.bind(),this.texture.bind(0),a.GL.draw(this.geom)},t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(2),a=i(s),u=n(75),c=r(u),l=n(74),h=r(l),d=function(){function t(e){o(this,t),this.program=new a.Program(c.default,h.default),this.bigTriangle=new a.geometry.BigTriangle(this.program)}return t.prototype.setPos=function(t,e){this.bigTriangle.position.x=t,this.bigTriangle.position.y=e},t.prototype.render=function(t,e){this.program.bind(),t.bind(e),a.GL.draw(this.bigTriangle)},t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(2),a=i(s),u=n(77),c=r(u),l=n(76),h=r(l),d=function(){function t(){o(this,t),this.time=0;for(var e=[],n=[],r=0,i=256,s=void 0,u=void 0,l=0;l<i;l++)for(var d=0;d<i;d++)s=d/i*2-1+.5/i,u=l/i*2-1+.5/i,e.push(s,u,0),n.push(r),r++;this.program=new a.Program(c.default,h.default,{textureCurr:{type:"texture",value:0},textureNext:{type:"texture",value:1},textureExtra:{type:"texture",value:2},percent:{type:"float",value:0},time:{type:"float",value:0},viewport:{type:"vec2",value:[0,0]}});var f=new a.State(a.gl);f.depthTest=!0,f.blend=!0,f.blendMode=!0,this.mesh=new a.geometry.Mesh(this.program,f,0),this.mesh.addPosition(e),this.mesh.addIndices(n)}return t.prototype.render=function(t,e,n,r){this.time+=.1,this.program.bind(),t.bind(0),e.bind(1),r.bind(2),this.program.uniforms.viewport=[a.gl.canvas.width,a.gl.canvas.height],this.program.uniforms.percent=n,this.program.uniforms.time=this.time,a.GL.draw(this.mesh)},t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(2),a=i(s),u=n(79),c=r(u),l=n(78),h=r(l),d=function(t,e){return t+Math.random()*(e-t)},f=function(){function t(){o(this,t);for(var e=[],n=[],r=[],i=[],s=0,u=256,l=void 0,f=void 0,p=20,_=2,v=1,m=0;m<u;m++)for(var g=0;g<u;g++)e.push(Math.random()*p-p/2,d(-_,_),d(-v,v)),l=g/u*2-1+.5/u,f=m/u*2-1+.5/u,i.push(Math.random(),Math.random(),Math.random()),n.push(l,f),r.push(s),s++;this.program=new a.Program(c.default,h.default),this.mesh=new a.geometry.Mesh(this.program,null,0),this.mesh.addPosition(e),this.mesh.addAttribute(i,"aExtra",3),this.mesh.addAttribute(n,"aUv",2),this.mesh.addIndices(r),this.program.bind(),a.GL.draw(this.mesh)}return t.prototype.render=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.program.bind(),a.GL.draw(this.mesh)},t}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(2),a=i(s),u=n(81),c=r(u),l=n(80),h=r(l),d=function(){function t(){o(this,t),this.time=255*Math.random(),this.program=new a.Program(c.default,h.default,{textureVel:{type:"texture",value:0},texturePos:{type:"texture",value:1},textureExtra:{type:"texture",value:2},maxRadius:{type:"float",value:5},time:{type:"float",value:this.time}}),this.mesh=new a.geometry.BigTriangle(this.program,null,0)}return t.prototype.render=function(t,e,n){this.program.bind(),this.time+=.001,this.program.uniforms.time=this.time,t.bind(0),e.bind(1),n.bind(2),a.GL.draw(this.mesh)},t}();e.default=d,t.exports=e.default},function(t,e,n){t.exports=n(28),t.exports.color=n(27)},function(t,e){var n=t.exports=n||{};n.color=n.color||{},n.utils=n.utils||{},n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),r=t.length-1;r>=0;r--)n=[t[r].apply(this,n)];return n[0]}},each:function(e,n,r){if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===e.length+0){for(var i=0,o=e.length;i<o;i++)if(i in e&&n.call(r,e[i],i)===this.BREAK)return}else for(var i in e)if(n.call(r,e[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.Color=n.color.Color=function(t,e,n,r){function i(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,i){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(n.color.interpret=function(t,e){var n,r,i=function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(o,function(i){if(i.litmus(t))return e.each(i.conversions,function(i,o){if(n=i.read(t),r===!1&&n!==!1)return r=n,n.conversionName=o,n.conversion=i,e.BREAK}),e.BREAK}),r},o=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return i}(n.color.toString,n.utils.common),n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),u=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r,i,o=Math.min(t,e,n),s=Math.max(t,e,n),a=s-o;return 0==s?{h:NaN,s:0,v:0}:(i=a/s,r=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,r/=6,r<0&&(r+=1),{h:360*r,s:i,v:s/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,r){return r<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common)},function(t,e){var n=t.exports=n||{};n.gui=n.gui||{},n.utils=n.utils||{},n.controllers=n.controllers||{},n.dom=n.dom||{},n.color=n.color||{},n.utils.css=function(){return{load:function(t,e){e=e||document;var n=e.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}}}(),n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;
return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),r=t.length-1;r>=0;r--)n=[t[r].apply(this,n)];return n[0]}},each:function(e,n,r){if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===e.length+0){for(var i=0,o=e.length;i<o;i++)if(i in e&&n.call(r,e[i],i)===this.BREAK)return}else for(var i in e)if(n.call(r,e[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(n.utils.common),n.dom.dom=function(t){function e(e){if("0"===e||t.isUndefined(e))return 0;var n=e.match(i);return t.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},r={};t.each(n,function(e,n){t.each(e,function(t){r[t]=n})});var i=/(\d+(\.\d+)?)px/,o={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,r){t.isUndefined(n)&&(n=!0),t.isUndefined(r)&&(r=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,i,o){i=i||{};var s=r[n];if(!s)throw new Error("Event type "+n+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var u=i.x||i.clientX||0,c=i.y||i.clientY||0;a.initMouseEvent(n,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=a.initKeyboardEvent||a.initKeyEvent;t.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(n,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(n,i.bubbles||!1,i.cancelable||!0)}t.defaults(a,o),e.dispatchEvent(a)},bind:function(t,e,n,r){return r=r||!1,t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),o},unbind:function(t,e,n,r){return r=r||!1,t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),o},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);n.indexOf(e)==-1&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return o},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);r!=-1&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return o},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var n=getComputedStyle(t);return e(n["border-left-width"])+e(n["border-right-width"])+e(n["padding-left"])+e(n["padding-right"])+e(n.width)},getHeight:function(t){var n=getComputedStyle(t);return e(n["border-top-width"])+e(n["border-bottom-width"])+e(n["padding-top"])+e(n["padding-bottom"])+e(n.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do e.left+=t.offsetLeft,e.top+=t.offsetTop;while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return o}(n.utils.common),n.controllers.OptionController=function(t,e,n){var r=function(t,i,o){r.superclass.call(this,t,i);var s=this;if(this.__select=document.createElement("select"),n.isArray(o)){var a={};n.each(o,function(t){a[t]=t}),o=a}n.each(o,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;s.setValue(t)}),this.domElement.appendChild(this.__select)};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.NumberController=function(t,e){function n(t){return t=t.toString(),t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var r=function(t,i,o){r.superclass.call(this,t,i),o=o||{},this.__min=o.min,this.__max=o.max,this.__step=o.step,e.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)};return r.superclass=t,e.extend(r.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),r.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),r}(n.controllers.Controller,n.utils.common),n.controllers.NumberControllerBox=function(t,e,n){function r(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var i=function(t,r,o){function s(){var t=parseFloat(d.__input.value);n.isNaN(t)||d.setValue(t)}function a(){s(),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function u(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",l),h=t.clientY}function c(t){var e=h-t.clientY;d.setValue(d.getValue()+e*d.__impliedStep),h=t.clientY}function l(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,i.superclass.call(this,t,r,o);var h,d=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",s),e.bind(this.__input,"blur",a),e.bind(this.__input,"mousedown",u),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(d.__truncationSuspended=!0,this.blur(),d.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=t,n.extend(i.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():r(this.getValue(),this.__precision),i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.NumberController,n.dom.dom,n.utils.common),n.controllers.NumberControllerSlider=function(t,e,n,r,i){function o(t,e,n,r,i){return r+(i-r)*((t-e)/(n-e))}var s=function(t,n,r,i,a){function u(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",l),c(t)}function c(t){t.preventDefault();var n=e.getOffset(h.__background),r=e.getWidth(h.__background);return h.setValue(o(t.clientX,n.left,n.left+r,h.__min,h.__max)),!1}function l(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",l),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}s.superclass.call(this,t,n,{min:r,max:i,step:a});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",u),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=t,s.useDefaultStyles=function(){n.inject(i)},r.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(n.controllers.NumberController,n.dom.dom,n.utils.css,n.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),n.controllers.FunctionController=function(t,e,n){var r=function(t,n,i){r.superclass.call(this,t,n);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,e.bind(this.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=t,n.extend(r.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.BooleanController=function(t,e,n){var r=function(t,n){function i(){o.setValue(!o.__prev)}r.superclass.call(this,t,n);var o=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",i,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.color.interpret=function(t,e){var n,r,i=function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(o,function(i){if(i.litmus(t))return e.each(i.conversions,function(i,o){if(n=i.read(t),r===!1&&n!==!1)return r=n,n.conversionName=o,n.conversion=i,e.BREAK}),e.BREAK}),r},o=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return i}(n.color.toString,n.utils.common),n.GUI=n.gui.GUI=function(t,e,n,r,i,o,s,a,u,c,l,h,d,f,p){function _(t,e,n,o){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var s;if(o.color)s=new l(e,n);else{var a=[e,n].concat(o.factoryArgs);s=r.apply(t,a)}o.before instanceof i&&(o.before=o.before.__li),g(t,s),f.addClass(s.domElement,"c");var u=document.createElement("span");f.addClass(u,"property-name"),u.innerHTML=s.property;var c=document.createElement("div");c.appendChild(u),c.appendChild(s.domElement);var h=v(t,c,o.before);return f.addClass(h,I.CLASS_CONTROLLER_ROW),f.addClass(h,typeof s.getValue()),m(t,h,s),t.__controllers.push(s),s}function v(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,params.before):t.__ul.appendChild(r),t.onResize(),r}function m(t,e,n){if(n.__li=e,n.__gui=t,p.extend(n,{options:function(e){return arguments.length>1?(n.remove(),_(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(e)||p.isObject(e)?(n.remove(),_(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var r=new a(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),i.apply(r,t)}}),f.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof a){var i=function(e){return p.isNumber(n.__min)&&p.isNumber(n.__max)?(n.remove(),_(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=p.compose(i,n.min),n.max=p.compose(i,n.max)}else n instanceof o?(f.bind(e,"click",function(){f.fakeEvent(n.__checkbox,"click")}),f.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof s?(f.bind(e,"click",function(){f.fakeEvent(n.__button,"click")}),f.bind(e,"mouseover",function(){f.addClass(n.__button,"hover")}),f.bind(e,"mouseout",function(){f.removeClass(n.__button,"hover")})):n instanceof l&&(f.addClass(e,"color"),n.updateDisplay=p.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=p.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&O(t.getRoot(),!0),e},n.setValue)}function g(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(r!=-1){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o,s=n.load.remembered;if(s[t.preset])o=s[t.preset];else{if(!s[k])return;o=s[k]}if(o[r]&&void 0!==o[r][e.property]){var a=o[r][e.property];e.initialValue=a,e.setValue(a)}}}}function b(t,e){return document.location.href+"."+e}function y(t){function e(){c.style.display=t.useLocalStorage?"block":"none"}var n=t.__save_row=document.createElement("li");f.addClass(t.domElement,"has-save"),t.__ul.insertBefore(n,t.__ul.firstChild),f.addClass(n,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",f.addClass(r,"button gears");var i=document.createElement("span");i.innerHTML="Save",f.addClass(i,"button"),f.addClass(i,"save");var o=document.createElement("span");o.innerHTML="New",f.addClass(o,"button"),f.addClass(o,"save-as");var s=document.createElement("span");s.innerHTML="Revert",f.addClass(s,"button"),f.addClass(s,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?p.each(t.load.remembered,function(e,n){M(t,n,n==t.preset)}):M(t,k,!1),f.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),n.appendChild(a),n.appendChild(r),n.appendChild(i),n.appendChild(o),n.appendChild(s),N){var u=document.getElementById("dg-save-locally"),c=document.getElementById("dg-local-explain");u.style.display="block";var l=document.getElementById("dg-local-storage");"true"===localStorage.getItem(b(t,"isLocal"))&&l.setAttribute("checked","checked"),e(),f.bind(l,"change",function(){t.useLocalStorage=!t.useLocalStorage,e()})}var h=document.getElementById("dg-new-constructor");f.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||P.hide()}),f.bind(r,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),P.show(),h.focus(),h.select()}),f.bind(i,"click",function(){t.save()}),f.bind(o,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),f.bind(s,"click",function(){t.revert()})}function x(t){function e(e){return e.preventDefault(),i=e.clientX,f.addClass(t.__closeButton,I.CLASS_DRAG),f.bind(window,"mousemove",n),f.bind(window,"mouseup",r),!1}function n(e){return e.preventDefault(),t.width+=i-e.clientX,t.onResize(),i=e.clientX,!1}function r(){f.removeClass(t.__closeButton,I.CLASS_DRAG),f.unbind(window,"mousemove",n),f.unbind(window,"mouseup",r)}t.__resize_handle=document.createElement("div"),p.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var i;f.bind(t.__resize_handle,"mousedown",e),f.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function E(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function w(t,e){var n={};return p.each(t.__rememberedObjects,function(r,i){var o={},s=t.__rememberedObjectIndecesToControllers[i];p.each(s,function(t,n){o[n]=e?t.initialValue:t.getValue()}),n[i]=o}),n}function M(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function T(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}function O(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];e?n.innerHTML=n.value+"*":n.innerHTML=n.value}function A(t){0!=t.length&&h(function(){A(t)}),p.each(t,function(t){t.updateDisplay()})}t.inject(n);var P,S,R="dg",C=72,L=20,k="Default",N=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),j=!0,D=!1,F=[],I=function(t){function e(){localStorage.setItem(b(r,"gui"),JSON.stringify(r.getSaveObject()))}function n(){var t=r.getRoot();t.width+=1,p.defer(function(){t.width-=1})}var r=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),f.addClass(this.domElement,R),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=p.defaults(t,{autoPlace:!0,width:I.DEFAULT_WIDTH}),t=p.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),p.isUndefined(t.load)?t.load={preset:k}:t.preset&&(t.load.preset=t.preset),p.isUndefined(t.parent)&&t.hideable&&F.push(this),t.resizable=p.isUndefined(t.parent)&&t.resizable,t.autoPlace&&p.isUndefined(t.scrollable)&&(t.scrollable=!0);var i=N&&"true"===localStorage.getItem(b(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return r.parent?r.getRoot().preset:t.load.preset},set:function(e){r.parent?r.getRoot().preset=e:t.load.preset=e,T(this),r.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,E(r,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,s&&(s.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?f.addClass(r.__ul,I.CLASS_CLOSED):f.removeClass(r.__ul,I.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=e?I.TEXT_OPEN:I.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return i},set:function(t){N&&(i=t,t?f.bind(window,"unload",e):f.unbind(window,"unload",e),localStorage.setItem(b(r,"isLocal"),t))}}}),p.isUndefined(t.parent)){if(t.closed=!1,f.addClass(this.domElement,I.CLASS_MAIN),f.makeSelectable(this.domElement,!1),N&&i){r.useLocalStorage=!0;var o=localStorage.getItem(b(this,"gui"));o&&(t.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=I.TEXT_CLOSED,f.addClass(this.__closeButton,I.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),f.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{void 0===t.closed&&(t.closed=!0);var s=document.createTextNode(t.name);f.addClass(s,"controller-name");var a=v(r,s),u=function(t){return t.preventDefault(),r.closed=!r.closed,!1};f.addClass(this.__ul,I.CLASS_CLOSED),f.addClass(a,"title"),f.bind(a,"click",u),t.closed||(this.closed=!1)}t.autoPlace&&(p.isUndefined(t.parent)&&(j&&(S=document.createElement("div"),f.addClass(S,R),f.addClass(S,I.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(S),j=!1),S.appendChild(this.domElement),f.addClass(this.domElement,I.CLASS_AUTO_PLACE)),this.parent||E(r,t.width)),f.bind(window,"resize",function(){r.onResize()}),f.bind(this.__ul,"webkitTransitionEnd",function(){r.onResize()}),f.bind(this.__ul,"transitionend",function(){r.onResize()}),f.bind(this.__ul,"oTransitionEnd",function(){r.onResize()}),this.onResize(),t.resizable&&x(this);r.getRoot();t.parent||n()};return I.toggleHide=function(){D=!D,p.each(F,function(t){t.domElement.style.zIndex=D?-999:999,t.domElement.style.opacity=D?0:1})},I.CLASS_AUTO_PLACE="a",I.CLASS_AUTO_PLACE_CONTAINER="ac",I.CLASS_MAIN="main",I.CLASS_CONTROLLER_ROW="cr",I.CLASS_TOO_TALL="taller-than-window",I.CLASS_CLOSED="closed",I.CLASS_CLOSE_BUTTON="close-button",I.CLASS_DRAG="drag",I.DEFAULT_WIDTH=245,I.TEXT_CLOSED="Close Controls",I.TEXT_OPEN="Open Controls",f.bind(window,"keydown",function(t){"text"===document.activeElement.type||t.which!==C&&t.keyCode!=C||I.toggleHide()},!1),p.extend(I.prototype,{add:function(t,e){return _(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return _(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;p.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&S.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new I(e);this.__folders[t]=n;var r=v(this,n.domElement);return f.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=f.getOffset(t.__ul).top,n=0;p.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=f.getHeight(e))}),window.innerHeight-e-L<n?(f.addClass(t.domElement,I.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-L+"px"):(f.removeClass(t.domElement,I.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&p.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(p.isUndefined(P)&&(P=new d,P.domElement.innerHTML=e),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;p.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&y(t),t.__rememberedObjects.indexOf(e)==-1&&t.__rememberedObjects.push(e)}),this.autoPlace&&E(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=w(this)),t.folders={},p.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=w(this),O(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[k]=w(this,!0)),this.load.remembered[t]=w(this),this.preset=t,M(this,t,!0)},revert:function(t){p.each(this.__controllers,function(e){this.getRoot().load.remembered?g(t||this.getRoot(),e):e.setValue(e.initialValue)},this),p.each(this.__folders,function(t){t.revert(t)}),t||O(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&A(this.__listening)}}),I}(n.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",n.controllers.factory=function(t,e,n,r,i,o,s){
return function(a,u){var c=a[u];return s.isArray(arguments[2])||s.isObject(arguments[2])?new t(a,u,arguments[2]):s.isNumber(c)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?new n(a,u,arguments[2],arguments[3]):new e(a,u,{min:arguments[2],max:arguments[3]}):s.isString(c)?new r(a,u):s.isFunction(c)?new i(a,u,""):s.isBoolean(c)?new o(a,u):void 0}}(n.controllers.OptionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.StringController=function(t,e,n){var r=function(t,n){function i(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}r.superclass.call(this,t,n);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",i),e.bind(this.__input,"change",i),e.bind(this.__input,"blur",o),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.FunctionController,n.controllers.BooleanController,n.utils.common),n.controllers.Controller,n.controllers.BooleanController,n.controllers.FunctionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.OptionController,n.controllers.ColorController=function(t,e,n,r,i){function o(t,e,n,r){t.style.background="",i.each(u,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}function s(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(t,u){function c(t){f(t),e.bind(window,"mousemove",f),e.bind(window,"mouseup",l)}function l(){e.unbind(window,"mousemove",f),e.unbind(window,"mouseup",l)}function h(){var t=r(this.value);t!==!1?(_.__color.__state=t,_.setValue(_.__color.toOriginal())):this.value=_.__color.toString()}function d(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",d)}function f(t){t.preventDefault();var n=e.getWidth(_.__saturation_field),r=e.getOffset(_.__saturation_field),i=(t.clientX-r.left+document.body.scrollLeft)/n,o=1-(t.clientY-r.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),i>1?i=1:i<0&&(i=0),_.__color.v=o,_.__color.s=i,_.setValue(_.__color.toOriginal()),!1}function p(t){t.preventDefault();var n=e.getHeight(_.__hue_field),r=e.getOffset(_.__hue_field),i=1-(t.clientY-r.top+document.body.scrollTop)/n;return i>1?i=1:i<0&&(i=0),_.__color.h=360*i,_.setValue(_.__color.toOriginal()),!1}a.superclass.call(this,t,u),this.__color=new n(this.getValue()),this.__temp=new n(0);var _=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),e.bind(this.__input,"blur",h),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(_.__selector,"drag")})});var v=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(v.style,{width:"100%",height:"100%",background:"none"}),o(v,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",c),e.bind(this.__field_knob,"mousedown",c),e.bind(this.__hue_field,"mousedown",function(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,i.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=r(this.getValue());if(t!==!1){var e=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(t[n])&&!i.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&i.extend(this.__color.__state,t)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return a}(n.controllers.Controller,n.dom.dom,n.color.Color=function(t,e,n,r){function i(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,i){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(n.color.interpret,n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),u=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r,i,o=Math.min(t,e,n),s=Math.max(t,e,n),a=s-o;return 0==s?{h:NaN,s:0,v:0}:(i=a/s,r=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,r/=6,r<0&&(r+=1),{h:360*r,s:i,v:s/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,r){return r<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common),n.color.interpret,n.utils.common),n.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),n.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(n.dom.dom,n.utils.common),n.dom.dom,n.utils.common)},function(t,e,n){!function(){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function n(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())})}function r(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function o(t){var e=t.a.offsetWidth,n=e+100;return t.f.style.width=n+"px",t.c.scrollLeft=n,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function s(t,n){function r(){var t=i;o(t)&&t.a.parentNode&&n(t.g)}var i=t;e(t.b,r),e(t.c,r),o(t)}function a(t,e){var n=e||{};this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function u(){if(null===d){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}d=""!==t.style.font}return d}function c(t,e){return[t.style,t.weight,u()?t.stretch:"","100px",e].join(" ")}var l=null,h=null,d=null,f=null;a.prototype.load=function(t,e){var o=this,a=t||"BESbswy",u=0,d=e||3e3,p=(new Date).getTime();return new Promise(function(t,e){var _;if(null===f&&(f=!!document.fonts),(_=f)&&(null===h&&(h=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),_=!h),_){_=new Promise(function(t,e){function n(){(new Date).getTime()-p>=d?e():document.fonts.load(c(o,'"'+o.family+'"'),a).then(function(e){1<=e.length?t():setTimeout(n,25)},function(){e()})}n()});var v=new Promise(function(t,e){u=setTimeout(e,d)});Promise.race([v,_]).then(function(){clearTimeout(u),t(o)},function(){e(o)})}else n(function(){function n(){var e;(e=-1!=m&&-1!=g||-1!=m&&-1!=b||-1!=g&&-1!=b)&&((e=m!=g&&m!=b&&g!=b)||(null===l&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=l&&(m==y&&g==y&&b==y||m==x&&g==x&&b==x||m==E&&g==E&&b==E)),e=!e),e&&(w.parentNode&&w.parentNode.removeChild(w),clearTimeout(u),t(o))}function h(){if((new Date).getTime()-p>=d)w.parentNode&&w.parentNode.removeChild(w),e(o);else{var t=document.hidden;!0!==t&&void 0!==t||(m=f.a.offsetWidth,g=_.a.offsetWidth,b=v.a.offsetWidth,n()),u=setTimeout(h,50)}}var f=new r(a),_=new r(a),v=new r(a),m=-1,g=-1,b=-1,y=-1,x=-1,E=-1,w=document.createElement("div");w.dir="ltr",i(f,c(o,"sans-serif")),i(_,c(o,"serif")),i(v,c(o,"monospace")),w.appendChild(f.a),w.appendChild(_.a),w.appendChild(v.a),document.body.appendChild(w),y=f.a.offsetWidth,x=_.a.offsetWidth,E=v.a.offsetWidth,h(),s(f,function(t){m=t,n()}),i(f,c(o,'"'+o.family+'",sans-serif')),s(_,function(t){g=t,n()}),i(_,c(o,'"'+o.family+'",serif')),s(v,function(t){b=t,n()}),i(v,c(o,'"'+o.family+'",monospace'))})})},t.exports=a}()},function(t,e,n){(function(e){"use strict";function r(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];i&&"."!==i&&(".."===i?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(i))}return n}function i(t){for(var e=t.length-1,n=0;n<=e&&!t[n];n++);for(var r=e;r>=0&&!t[r];r--);return 0===n&&r===e?t:n>r?[]:t.slice(n,r+1)}function o(t){var e=h.exec(t),n=(e[1]||"")+(e[2]||""),r=e[3]||"",i=d.exec(r),o=i[1],s=i[2],a=i[3];return[n,o,s,a]}function s(t){var e=h.exec(t),n=e[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!e[2],tail:e[3]}}function a(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}function u(t){return p.exec(t).slice(1)}var c="win32"===e.platform,l=n(66),h=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,d=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,f={};f.resolve=function(){for(var t="",n="",i=!1,o=arguments.length-1;o>=-1;o--){var u;if(o>=0?u=arguments[o]:t?(u=e.env["="+t],u&&u.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(u=t+"\\")):u=e.cwd(),!l.isString(u))throw new TypeError("Arguments to path.resolve must be strings");if(u){var c=s(u),h=c.device,d=c.isUnc,f=c.isAbsolute,p=c.tail;if((!h||!t||h.toLowerCase()===t.toLowerCase())&&(t||(t=h),i||(n=p+"\\"+n,i=f),t&&i))break}}return d&&(t=a(t)),n=r(n.split(/[\\\/]+/),!i).join("\\"),t+(i?"\\":"")+n||"."},f.normalize=function(t){var e=s(t),n=e.device,i=e.isUnc,o=e.isAbsolute,u=e.tail,c=/[\\\/]$/.test(u);return u=r(u.split(/[\\\/]+/),!o).join("\\"),u||o||(u="."),u&&c&&(u+="\\"),i&&(n=a(n)),n+(o?"\\":"")+u},f.isAbsolute=function(t){return s(t).isAbsolute},f.join=function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(!l.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&t.push(n)}var r=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),f.normalize(r)},f.relative=function(t,e){t=f.resolve(t),e=f.resolve(e);for(var n=t.toLowerCase(),r=e.toLowerCase(),o=i(e.split("\\")),s=i(n.split("\\")),a=i(r.split("\\")),u=Math.min(s.length,a.length),c=u,l=0;l<u;l++)if(s[l]!==a[l]){c=l;break}if(0==c)return e;for(var h=[],l=c;l<s.length;l++)h.push("..");return h=h.concat(o.slice(c)),h.join("\\")},f._makeLong=function(t){if(!l.isString(t))return t;if(!t)return"";var e=f.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},f.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},f.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},f.extname=function(t){return o(t)[3]},f.format=function(t){if(!l.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!l.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir,r=t.base||"";return n?n[n.length-1]===f.sep?n+r:n+f.sep+r:r},f.parse=function(t){if(!l.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=o(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},f.sep="\\",f.delimiter=";";var p=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,_={};_.resolve=function(){for(var t="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var o=i>=0?arguments[i]:e.cwd();if(!l.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o[0])}return t=r(t.split("/"),!n).join("/"),(n?"/":"")+t||"."},_.normalize=function(t){var e=_.isAbsolute(t),n=t&&"/"===t[t.length-1];return t=r(t.split("/"),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},_.isAbsolute=function(t){return"/"===t.charAt(0)},_.join=function(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];if(!l.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(t+=t?"/"+n:n)}return _.normalize(t)},_.relative=function(t,e){t=_.resolve(t).substr(1),e=_.resolve(e).substr(1);for(var n=i(t.split("/")),r=i(e.split("/")),o=Math.min(n.length,r.length),s=o,a=0;a<o;a++)if(n[a]!==r[a]){s=a;break}for(var u=[],a=s;a<n.length;a++)u.push("..");return u=u.concat(r.slice(s)),u.join("/")},_._makeLong=function(t){return t},_.dirname=function(t){var e=u(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},_.basename=function(t,e){var n=u(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},_.extname=function(t){return u(t)[3]},_.format=function(t){if(!l.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!l.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir?t.dir+_.sep:"",r=t.base||"";return n+r},_.parse=function(t){if(!l.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=u(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},_.sep="/",_.delimiter=":",c?t.exports=f:t.exports=_,t.exports.posix=_,t.exports.win32=f}).call(e,n(14))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(4),a=r(s),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this.gl=POLY.gl;var o=this.gl;this.width=e,this.height=n,this._multiTargets=r,a.default.getExtension("OES_texture_float_linear");var s=a.default.getExtension("OES_texture_half_float"),u=o.UNSIGNED_BYTE;if(a.default.checkExtension("OES_texture_float")?u=o.FLOAT:s&&(u=s.HALF_FLOAT_OES),this.depthTexture=null,this.textures=[],this._initTextures(u),this.framebuffer=o.createFramebuffer(),o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer),POLY.webgl2){for(var c=[],l=0;l<this.textures.length;l++)o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.COLOR_ATTACHMENT0+l,o.TEXTURE_2D,this.textures[l]._texture,0),c.push(o["COLOR_ATTACHMENT"+l]);o.drawBuffers(c),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.TEXTURE_2D,this.depthTexture._texture,0)}else if(this._multiTargets){for(var h=a.default.getExtension("WEBGL_draw_buffers"),d=0;d<this.textures.length;d++)o.framebufferTexture2D(o.FRAMEBUFFER,h["COLOR_ATTACHMENT"+d+"_WEBGL"],o.TEXTURE_2D,this.textures[d]._texture,0);o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&console.log("error"),h.drawBuffersWEBGL([h.COLOR_ATTACHMENT0_WEBGL,h.COLOR_ATTACHMENT1_WEBGL,h.COLOR_ATTACHMENT2_WEBGL,h.COLOR_ATTACHMENT3_WEBGL]),this.depthTexture}else{var f=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,f),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,this.width,this.height),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,this.textures[0]._texture,0),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,f)}this.clean()}return o(t,[{key:"_initTextures",value:function(t){for(var e=this.gl,n=this._multiTargets?4:1,r=0;r<n;r++){var i=this._createTexture(e.RGBA,e.RGBA,t);this.textures.push(i)}this.gltexture=this.textures[0],POLY.webgl2&&(this.depthTexture=this._createTexture(e.DEPTH_COMPONENT24,e.DEPTH_COMPONENT,e.UNSIGNED_INT))}},{key:"_createTexture",value:function(t,e,n,r){var i=this.gl;t=t||i.RGBA,e=e||i.RGBA,n=n||i.UNSIGNED_BYTE,r=r||null;var o=i.createTexture(),s=new POLY.Texture(o,!0);return i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texImage2D(i.TEXTURE_2D,0,t,this.width,this.height,0,e,n,r),i.bindTexture(i.TEXTURE_2D,null),s}},{key:"getTexture",value:function(t){return this.textures[t]}},{key:"bind",value:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}},{key:"unbind",value:function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height)}},{key:"clean",value:function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:"clear",value:function(){this.bind(),this.gl.clear(0,0,0,0),this.unbind()}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(5),a=r(s),u=n(4),c=r(u),l=n(13),h=r(l);e.default=new(function(){function t(){i(this,t),this._lastMesh=null,this._lastProgram=null,this.aspectRatio=0,this.state=null,this.enabledVertexAttributes=[],this.instancedAttributes=[]}return o(t,[{key:"init",value:function(t){this.state=new a.default(t),c.default.init(),this._hasInstance=c.default.checkExtension("ANGLE_instanced_arrays"),this._instanceExt=c.default.getExtension("ANGLE_instanced_arrays"),(0,h.default)(t,"WEBGL_draw_buffers")}},{key:"_bindBuffers",value:function(t){for(var e=t.program.gl,n=0;n<t._attributes.length;n++){var r=t._attributes[n];e.bindBuffer(e.ARRAY_BUFFER,r.buffer);var i=t.program.getAttributeLocation(r.name);e.vertexAttribPointer(i,r.itemSize,e.FLOAT,!1,0,0),t.instanceCount>0&&r.instance&&this._hasInstance&&(this._instanceExt.vertexAttribDivisorANGLE(i,1),this.instancedAttributes.push(i)),this.enabledVertexAttributes.indexOf(i)===-1&&(this.enabledVertexAttributes.push(i),e.enableVertexAttribArray(i))}t.indexBuffer&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer)}},{key:"setCamera",value:function(t){this._camera=t}},{key:"_updateMatrices",value:function(t){var e=t.program;e.uniforms.projectionMatrix=this._camera.projectionMatrix,e.uniforms.viewMatrix=this._camera.matrix,e.uniforms.modelMatrix=t._matrix}},{key:"draw",value:function(t){this._lastMesh!==t&&(this.resetInstancedAttribute(),this._bindBuffers(t),this._lastMesh=t),this._lastProgram!==t.program&&(this._lastProgram=t.program),t.update();var e=t.program.gl;t.state&&this.state.setState(t.state),this._camera&&this._updateMatrices(t),t.instanceCount>0&&this._hasInstance?t.indexBuffer?this._instanceExt.drawElementsInstancedANGLE(t.drawType,t._indices.length,e.UNSIGNED_SHORT,0,t.instanceCount):this._instanceExt.drawArraysInstancedANGLE(t.drawType,0,t._numItems,t.instanceCount):t.indexBuffer?e.drawElements(t.drawType,t._indices.length,e.UNSIGNED_SHORT,0):e.drawArrays(t.drawType,0,t._numItems)}},{key:"resetInstancedAttribute",value:function(){if(this.instancedAttributes.length>0&&this._hasInstance){for(var t=0;t<this.instancedAttributes.length;t++){var e=this.instancedAttributes[t];this._instanceExt.vertexAttribDivisorANGLE(e,0)}this.instancedAttributes=[]}}},{key:"resize",value:function(t,e){var n=POLY.gl;n.canvas.width=t,n.canvas.height=e,n.viewportWidth=t,n.viewportHeight=e,n.viewport(0,0,n.viewportWidth,n.viewportHeight),this.aspectRatio=t/e}}]),t}()),t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),s=function(){function t(){r(this,t),this.aspectRatio=o.mat4.create(),this.matrix=o.mat4.create(),this.projectionMatrix=o.mat4.create(),this.mRX=o.mat4.create(),this.mRY=o.mat4.create(),this.mRZ=o.mat4.create(),this.mT=o.mat4.create(),this.position=o.vec3.create()}return i(t,[{key:"lookAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1,0];o.mat4.lookAt(this.matrix,this.position,t,e)}},{key:"rotateY",value:function(t){o.mat4.fromYRotation(this.mRY,t)}},{key:"rotateX",value:function(t){o.mat4.identity(this.mRX),o.mat4.fromXRotation(this.mRX,t)}},{key:"rotateZ",value:function(t){o.mat4.identity(this.mRZ),o.mat4.fromXRotation(this.mRZ,t)}},{key:"setRotation",value:function(t,e,n){}},{key:"setPosition",value:function(t,e,n){this.position=[t,e,n],o.mat4.identity(this.mT,this.mT),o.mat4.translate(this.mT,this.mT,[t,e,n])}},{key:"setAspectRatio",value:function(t){this.aspectRatio=t,this.perspective(this.fov,t,this.near,this.far)}},{key:"perspective",value:function(t,e,n,r){o.mat4.perspective(this.projectionMatrix,t,e,n,r),this.fov=t,this.near=n,this.far=r,this.aspect=e}},{key:"orthographic",value:function(t,e,n,r,i,o,s){return s=s||new Float32Array(16),s[0]=2/(e-t),s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/(r-n),s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2/(i-o),s[11]=0,s[12]=(t+e)/(t-e),s[13]=(n+r)/(n-r),s[14]=(i+o)/(i-o),s[15]=1,s}}]),t}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(33),o=r(i);e.default={PerspectiveCamera:o.default},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),s=function(t){return t.touches?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.clientX,y:t.clientY}},a=o.vec3.fromValues(0,1,0),u=(Math.PI/2-.01,function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;r(this,t),this._mtxTarget=e,this._radius=n,this._targetRadius=n,this._listenerTarget=i,this._isDown=!1,this._rotation=o.mat4.create(),this.center=o.vec3.create(),this.easing=.1,this.senstivity=1,this.senstivityRotation=1,this._isLocked=!1,this._isZoomLocked=!1,this._rx=0,this._trx=0,this._prevx=0,this._ry=0,this._try=0,this._prevy=0,this._quat=o.quat.create(),this._vec=o.vec3.create(),this._mtx=o.mat4.create(),this._mouseDown={x:0,y:0},this._mouse={x:0,y:0},this._init()}return i(t,[{key:"_init",value:function(){var t=this;this._listenerTarget.addEventListener("mousedown",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("mouseup",function(){return t._onUp()}),this._listenerTarget.addEventListener("mousemove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("touchstart",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("touchend",function(){return t._onUp()}),this._listenerTarget.addEventListener("touchmove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("mousewheel",function(e){return t._onWheel(e)}),this._listenerTarget.addEventListener("DOMMouseScroll",function(e){return t._onWheel(e)})}},{key:"lock",value:function(t){this._isLocked=t}},{key:"lockZoom",value:function(t){this._isZoomLocked=t}},{key:"_onWheel",value:function(t){if(!this._isZoomLocked){var e=t.wheelDelta,n=t.detail,r=0;r=n?e?e/n/40*n>0?1:-1:-n/3:e/120,this._targetRadius+=2*-r*this.senstivity,this._targetRadius<.01&&(this._targetRadius=.01)}}},{key:"_onDown",value:function(t){
this._isLocked||(this._isDown=!0,this._mouseDown=s(t),this._mouse=s(t),this._prevx=this._trx=this._rx,this._prevy=this._try=this._ry)}},{key:"_onMove",value:function(t){this._isLocked||this._isDown&&(this._mouse=s(t))}},{key:"_onUp",value:function(){this._isLocked||(this._isDown=!1)}},{key:"update",value:function(){var t=this._mouse.x-this._mouseDown.x,e=this._mouse.y-this._mouseDown.y,n=.02*this.senstivityRotation;this._try=this._prevy-t*n,this._trx=this._prevx-e*n,this._trx<-Math.PI/2+.01?this._trx=-Math.PI/2+.01:this._trx>Math.PI/2-.01&&(this._trx=Math.PI/2-.01),this._rx+=(this._trx-this._rx)*this.easing,this._ry+=(this._try-this._ry)*this.easing,this._radius+=(this._targetRadius-this._radius)*this.easing,o.quat.identity(this._quat),o.quat.rotateY(this._quat,this._quat,this._ry),o.quat.rotateX(this._quat,this._quat,this._rx),o.vec3.set(this._vec,0,0,this._radius),o.vec3.transformQuat(this._vec,this._vec,this._quat),o.mat4.identity(this._mtx),o.mat4.lookAt(this._mtx,this._vec,this.center,a),this._mtxTarget&&o.mat4.copy(this._mtxTarget,this._mtx)}}]),t}());e.default=u,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(35),o=r(i);e.default={OrbitalControl:o.default},t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){return n(this,t),this.cb=e,this._x=0,this._y=0,this._z=0,this}return r(t,[{key:"set",value:function(t,e,n){t||(t=0),void 0===e&&(e=n=t),this._x=t,this._y=e,this._z=n,this.cb&&this.cb()}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.cb&&this.cb()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.cb&&this.cb()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this.cb&&this.cb()}}]),t}();e.default=i,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(37),o=r(i);e.default={Vector:o.default},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),a=n(38),u=r(a),c=function(){function t(){i(this,t),this._matrix=s.mat4.create(),this._needsUpdate=!1,this.position=new u.default.Vector(this._onPropertyUpdate.bind(this)),this.scale=new u.default.Vector(this._onPropertyUpdate.bind(this)),this.scale.set(1,1,1),this.rotation=new u.default.Vector(this._onPropertyUpdate.bind(this)),this._rotation=s.vec3.create(),this._scale=s.vec3.fromValues(1,1,1),this._position=s.vec3.create()}return o(t,[{key:"_onPropertyUpdate",value:function(){this._needsUpdate=!0}},{key:"_updateMatrix",value:function(){s.vec3.set(this._scale,this.scale.x,this.scale.y,this.scale.z),s.vec3.set(this._position,this.position.x,this.position.y,this.position.z),s.vec3.set(this._rotation,this.rotation.x,this.rotation.y,this.rotation.z),s.mat4.identity(this._matrix,this._matrix),s.mat4.translate(this._matrix,this._matrix,this._position),s.mat4.rotateX(this._matrix,this._matrix,this._rotation[0]),s.mat4.rotateY(this._matrix,this._matrix,this._rotation[1]),s.mat4.rotateZ(this._matrix,this._matrix,this._rotation[2]),s.mat4.scale(this._matrix,this._matrix,this._scale)}},{key:"update",value:function(){this._needsUpdate&&this._updateMatrix()}}]),t}();e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=r(i),s=n(42),a=r(s),u=n(47),c=r(u),l=n(43),h=r(l),d=n(45),f=r(d),p=n(41),_=r(p),v=n(46),m=r(v),g=n(44),b=r(g);e.default={Mesh:o.default,Cube:a.default,Sphere:c.default,IcoSphere:h.default,BigTriangle:_.default,Quad:m.default,Plane:f.default,Line:b.default},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),u=r(a),c=n(6),l=(r(c),n(7)),h=(r(l),function(t){function e(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2]),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r)),a=[2,1,0],u=[-1,-1,-1,4,4,-1];return s.addPosition(u,"aPosition",2),s.addIndices(a,!1),s}return s(e,t),e}(u.default));e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=r(u),l=n(6),h=r(l),d=n(7),f=(r(d),function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,s));return n=n||{},a.options={w:n.w||1,h:n.h||1,d:n.d||1,multiFace:n.multiFace,subdivision:n.subdivision||0,positionAttributeName:n.positionAttributeName||"aPosition"},a.multiFace=a.options.multiFace,a.subdivision=a.options.subdivision,a.width=a.options.w,a.height=a.options.h,a.depth=a.options.d,a.cube(),a}return s(e,t),a(e,[{key:"cube",value:function(){var t=this.width/2,e=this.height/2,n=this.depth/2,r=[],i=[],o=[],s=[],a=0;r.push(-t,e,-n),r.push(t,e,-n),r.push(t,-e,-n),r.push(-t,-e,-n),s.push(0,0,-1),s.push(0,0,-1),s.push(0,0,-1),s.push(0,0,-1),this.multiFace?(i.push(0,0),i.push(.25,0),i.push(.25,.5),i.push(0,.5)):(i.push(0,0),i.push(1,0),i.push(1,1),i.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,r.push(t,e,-n),r.push(t,e,n),r.push(t,-e,n),r.push(t,-e,-n),s.push(1,0,0),s.push(1,0,0),s.push(1,0,0),s.push(1,0,0),this.multiFace?(i.push(.25,0),i.push(.5,0),i.push(.5,.5),i.push(.25,.5)):(i.push(0,0),i.push(1,0),i.push(1,1),i.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,r.push(t,e,n),r.push(-t,e,n),r.push(-t,-e,n),r.push(t,-e,n),s.push(0,0,1),s.push(0,0,1),s.push(0,0,1),s.push(0,0,1),this.multiFace?(i.push(.5,0),i.push(.75,0),i.push(.75,.5),i.push(.5,.5)):(i.push(0,0),i.push(1,0),i.push(1,1),i.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,r.push(-t,e,n),r.push(-t,e,-n),r.push(-t,-e,-n),r.push(-t,-e,n),s.push(-1,0,0),s.push(-1,0,0),s.push(-1,0,0),s.push(-1,0,0),this.multiFace?(i.push(0,.5),i.push(.25,.5),i.push(.25,1),i.push(0,1)):(i.push(0,0),i.push(1,0),i.push(1,1),i.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,r.push(-t,e,n),r.push(t,e,n),r.push(t,e,-n),r.push(-t,e,-n),s.push(0,1,0),s.push(0,1,0),s.push(0,1,0),s.push(0,1,0),this.multiFace?(i.push(.25,.5),i.push(.5,.5),i.push(.5,1),i.push(.25,1)):(i.push(0,0),i.push(1,0),i.push(1,1),i.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,r.push(-t,-e,-n),r.push(t,-e,-n),r.push(t,-e,n),r.push(-t,-e,n),s.push(0,-1,0),s.push(0,-1,0),s.push(0,-1,0),s.push(0,-1,0),this.multiFace?(i.push(.5,.5),i.push(.75,.5),i.push(.75,1),i.push(.5,1)):(i.push(0,0),i.push(1,0),i.push(1,1),i.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3);for(var u=[],c=0;c<o.length;c+=3)u.push(o[c],o[c+1],o[c+2]);for(var l=h.default.multiplyTriangles(this.subdivision,u,r),d=r.length-i.length,c=0;c<d;c++)i.push(0,0),s.push(0,-1,0);this.uvs=i,this.normals=s,this.addPosition(r,this.options.positionAttributeName),this.addIndices(l,!1)}}]),e}(c.default));e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=r(u),l=n(7),h=r(l),d=n(6),f=r(d),p=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],s=arguments[3];i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,s));return n=n||{},a.options={subdivision:n.subdivision||1,radius:n.radius||1,positionAttributeName:n.positionAttributeName||"aPosition"},a.icosphere(),a}return s(e,t),a(e,[{key:"icosphere",value:function(){var t=[],e=[],n=1,r=(1+Math.sqrt(5))/2*n;this.positions=[],this.addVertex([-1*n,r,0],t),this.addVertex([1*n,r,0],t),this.addVertex([-1*n,-r,0],t),this.addVertex([1*n,-r,0],t),this.addVertex([0,-1*n,r],t),this.addVertex([0,1*n,r],t),this.addVertex([0,-1*n,-r],t),this.addVertex([0,1*n,-r],t),this.addVertex([r,0,-1*n],t),this.addVertex([r,0,1*n],t),this.addVertex([-r,0,-1*n],t),this.addVertex([-r,0,1*n],t),e.push([0,11,5]),e.push([0,5,1]),e.push([0,1,7]),e.push([0,7,10]),e.push([0,10,11]),e.push([1,5,9]),e.push([5,11,4]),e.push([11,10,2]),e.push([10,7,6]),e.push([7,1,8]),e.push([3,9,4]),e.push([3,4,2]),e.push([3,2,6]),e.push([3,6,8]),e.push([3,8,9]),e.push([4,9,5]),e.push([2,4,11]),e.push([6,2,10]),e.push([8,6,7]),e.push([9,8,1]),e=f.default.multiplyTriangles(this.options.subdivision,e,t);for(var i=h.default.separate(e,t),o=i.vertices,s=i.faces,a=[],u=0;u<o.length;u++){var c=o[u];c[0]*=this.options.radius,c[1]*=this.options.radius,c[2]*=this.options.radius,a.push(c[0],c[1],c[2])}this.addPosition(a,this.options.positionAttributeName),this.addIndices(s,!1)}},{key:"addVertex",value:function(t,e){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);e.push([t[0]/n,t[1]/n,t[2]/n])}},{key:"render",value:function(){}}]),e}(c.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=r(u),l=[],h=[],d=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,s));return n.length<=0&&(n=[[0,0,0],[.5,1.25,0],[.25,1,0],[0,1,0],[-.5,1.1,0],[-.35,1.5,0]]),a.positions=[],a.directions=[],a.indicesArray=[],a.counters=[],a.width=[],a.uvs=[],a.previous=[],a.next=[],a.points=n,a.line(),a}return s(e,t),a(e,[{key:"line",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.points;this.positions.length=2*e.length,this.counters.length=2*e.length;var n=0,r=0;this.previous.length=this.positions.length,this.next.length=this.positions.length;for(var i=0;i<e.length;i++){if(t){var o=i/e.length;this.counters[r++]=[o],this.counters[r++]=[o]}this.positions[n++]=e[i][0],this.positions[n++]=e[i][1],this.positions[n++]=e[i][2],this.positions[n++]=e[i][0],this.positions[n++]=e[i][1],this.positions[n++]=e[i][2]}this.process(t)}},{key:"compareV3",value:function(t,e){var n=6*t,r=6*e;return this.positions[n]===this.positions[r]&&this.positions[n+1]===this.positions[r+1]&&this.positions[n+2]===this.positions[r+2]}},{key:"copyV3",value:function(t,e){e||(e=l);var n=6*t;e[0]=this.positions[n],e[1]=this.positions[n+1],e[2]=this.positions[n+2]}},{key:"process",value:function(t){var e=this.positions.length/6,n=0,r=0;this.compareV3(0,e-1)?this.copyV3(e-2):this.copyV3(0),this.previous[n++]=l[0],this.previous[n++]=l[1],this.previous[n++]=l[2],this.previous[n++]=l[0],this.previous[n++]=l[1],this.previous[n++]=l[2];for(var i=0;i<e;i++)this.copyV3(i,l),i>0&&(this.next[r++]=l[0],this.next[r++]=l[1],this.next[r++]=l[2],this.next[r++]=l[0],this.next[r++]=l[1],this.next[r++]=l[2],this.previous[n++]=h[0],this.previous[n++]=h[1],this.previous[n++]=h[2],this.previous[n++]=h[0],this.previous[n++]=h[1],this.previous[n++]=h[2]),h[0]=l[0],h[1]=l[1],h[2]=l[2];if(this.compareV3(e-1,0)?this.copyV3(1,l):this.copyV3(e-1,l),this.next[r++]=l[0],this.next[r++]=l[1],this.next[r++]=l[2],this.next[r++]=l[0],this.next[r++]=l[1],this.next[r++]=l[2],n=0,this.addPosition(this.positions,"position"),this.addAttribute(this.next,"aNext"),this.addAttribute(this.previous,"aPrevious"),t){n=0,this.uvs=[];for(var o=void 0,s=0;s<e;s++)o=this.widthCallback?this.widthCallback(s/(e-1)):.1,this.width[n++]=o,this.width[n++]=o,this.uvs.push(s/(e-1),0),this.uvs.push(s/(e-1),1);n=0,this.indicesArray=[];for(var a=0;a<e-1;a++){var u=2*a;this.indicesArray[n++]=u,this.indicesArray[n++]=u+1,this.indicesArray[n++]=u+2,this.indicesArray[n++]=u+2,this.indicesArray[n++]=u+1,this.indicesArray[n++]=u+3}n=0,this.directions=[];for(var c=0;c<this.positions.length;c++)c%2===0?this.directions[n++]=1:this.directions[n++]=-1;this.addIndices(this.indicesArray,!1),this.addAttribute(this.directions,"direction",1),this.addAttribute(this.uvs,"aUv",2),this.addAttribute(this.counters,"aCounters",1)}}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.points=t||this.points,this.line(e)}}]),e}(c.default);e.default=d,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=r(u),l=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,s));return n=n||{},a.options={w:n.w||1,h:n.h||1,d:n.d||1,axis:n.axis||"xy",positionAttributeName:n.positionAttributeName||"aPosition",subdivision:n.subdivision||10},a.pivotX=-a.options.w/2,a.pivotY=-a.options.h/2,a.plane(a.options.w,a.options.h,a.options.subdivision,a.options.axis),a}return s(e,t),a(e,[{key:"plane",value:function(t,e,n,r){for(var i=[],o=[],s=0,a=void 0,u=void 0,c=void 0,l=0;l<n;l++){u=l/n;for(var h=0;h<n;h++)c=h/n,a=this.getPos(l,h),i.push(a[0],a[1],a[2]),a=this.getPos(l+1,h),i.push(a[0],a[1],a[2]),a=this.getPos(l+1,h+1),i.push(a[0],a[1],a[2]),a=this.getPos(l,h+1),i.push(a[0],a[1],a[2]),o.push(4*s+0),o.push(4*s+1),o.push(4*s+2),o.push(4*s+0),o.push(4*s+2),o.push(4*s+3),s++,this.uvs.push(u,c,u,c,u,c,u,c)}this.addPosition(i,this.options.positionAttributeName),this.addIndices(o,!1)}},{key:"getPos",value:function(t,e){var n=this.options.w/this.options.subdivision*t+this.pivotX,r=this.options.h/this.options.subdivision*e+this.pivotY,i=0;return"xy"===this.options.axis?[n,r,i]:[n,0,r]}}]),e}(c.default);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),u=r(a),c=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,s));n=n||{};var u=new Float32Array(new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]));return a.addPosition(u,n.positionAttributeName||"aPosition"),a.addIndices([0,1,2,0,2,3]),a.uvs=[1,0,1,1,0,1,0,0],a}return s(e,t),e}(u.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=r(u),l=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],s=arguments[3];i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,s));return n=n||{},a.options={nbVert:n.nbVert||10,radius:n.radius||1,positionAttributeName:n.positionAttributeName||"aPosition"},a.sphere(),a}return s(e,t),a(e,[{key:"sphere",value:function(){for(var t=[],e=[],n=0,r=[],i=1/this.options.nbVert,o=void 0,s=0;s<this.options.nbVert;s++)for(var a=0;a<this.options.nbVert;a++){o=this.getAngle(s,a),t.push(o[0],o[1],o[2]),o=this.getAngle(s+1,a),t.push(o[0],o[1],o[2]),o=this.getAngle(s+1,a+1),t.push(o[0],o[1],o[2]),o=this.getAngle(s,a+1),t.push(o[0],o[1],o[2]);var u=a/this.options.nbVert,c=s/this.options.nbVert;r.push(1-u,c),r.push(1-u,c+i),r.push(1-u-i,c+i),r.push(1-u-i,c),e.push(4*n+0),e.push(4*n+1),e.push(4*n+2),e.push(4*n+0),e.push(4*n+2),e.push(4*n+3),n++}this.uvs=r,this.addPosition(t,this.options.positionAttributeName),this.addIndices(e,!1)}},{key:"getAngle",value:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],e/this.options.nbVert*Math.PI*2-Math.PI),r=t/this.options.nbVert*Math.PI-.5*Math.PI,i=this.options.radius,o=[];o[1]=Math.sin(r)*i;var s=Math.cos(r)*i;return o[0]=Math.cos(n)*s,o[2]=Math.sin(n)*s,[o[0],o[1],o[2]]}},{key:"render",value:function(){}}]),e}(c.default);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=r(u),l=n(11),h=r(l),d=n(5),f=r(d),p=n(70),_=r(p),v=n(71),m=r(v),g=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25;i(this,e);var n=new h.default(_.default,m.default,{color:{type:"vec3",value:[1,1,1]},opacity:{type:"float",value:.6}}),r=new f.default(POLY.gl);r.depthTest=!0;for(var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r,0)),a=0,u=[],c=[],l=-t;l<t;l++)for(var d=-t;d<t;d++)u.push(l,d,0),c.push(a),a++,u.push(l,0,d),c.push(a),a++;return s.addPosition(u,"aPosition"),s.addIndices(c),s}return s(e,t),a(e,[{key:"draw",value:function(){this.program.bind(),POLY.GL.draw(this)}}]),e}(c.default);e.default=g,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(48),o=r(i);e.default={BatchPlanes:o.default},t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(this,t),this._req=new XMLHttpRequest,this._req.addEventListener("load",function(t){return e._onLoaded(t)}),this._req.addEventListener("progress",function(t){return e._onProgress(t)}),r&&(this._req.responseType="arraybuffer")}return r(t,[{key:"load",value:function(t,e){console.log("Loading : ",t),this._callback=e,this._req.open("GET",t),this._req.send()}},{key:"_onLoaded",value:function(){this._callback(this._req.response)}},{key:"_onProgress",value:function(){}}]),t}();e.default=i,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(r)},c=n(50),l=r(c),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),a(e,[{key:"load",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;this._drawType=r,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"load",this).call(this,t,n)}},{key:"_onLoaded",value:function(){this.parseObj(this._req.response)}},{key:"parseObj",value:function(t){function e(t){var e=parseInt(t);return 3*(e>=0?e-1:e+d.length/3)}function n(t){var e=parseInt(t);return 3*(e>=0?e-1:e+f.length/3)}function r(t){var e=parseInt(t);return 2*(e>=0?e-1:e+p.length/2)}function i(t,e,n){c.push(d[t],d[t+1],d[t+2]),c.push(d[e],d[e+1],d[e+2]),c.push(d[n],d[n+1],d[n+2]),_.push(3*v+0),_.push(3*v+1),_.push(3*v+2),v++}function o(t,e,n){l.push(p[t],p[t+1]),l.push(p[e],p[e+1]),l.push(p[n],p[n+1])}function s(t,e,n){h.push(f[t],f[t+1],f[t+2]),h.push(f[e],f[e+1],f[e+2]),h.push(f[n],f[n+1],f[n+2])}function a(t,a,u,c,l,h,d,f,p,_,v,m){var g=e(t),b=e(a),y=e(u),x=void 0;void 0===c?i(g,b,y):(x=e(c),i(g,b,x),i(b,y,x)),void 0!==l&&(g=r(l),b=r(h),y=r(d),void 0===c?o(g,b,y):(x=r(f),o(g,b,x),o(b,y,x))),void 0!==p&&(g=n(p),b=n(_),y=n(v),void 0===c?s(g,b,y):(x=n(m),s(g,b,x),s(b,y,x)))}for(var u=t.split("\n"),c=[],l=[],h=[],d=[],f=[],p=[],_=[],v=0,m=void 0,g=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,b=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,y=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,x=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,E=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,w=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,M=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,T=0;T<u.length;T++){var O=u[T];O=O.trim(),0!==O.length&&"#"!==O.charAt(0)&&(null!==(m=g.exec(O))?d.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])):null!==(m=b.exec(O))?f.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])):null!==(m=y.exec(O))?p.push(parseFloat(m[1]),parseFloat(m[2])):null!==(m=x.exec(O))?a(m[1],m[2],m[3],m[4]):null!==(m=E.exec(O))?a(m[2],m[5],m[8],m[11],m[3],m[6],m[9],m[12]):null!==(m=w.exec(O))?a(m[2],m[6],m[10],m[14],m[3],m[7],m[11],m[15],m[4],m[8],m[12],m[16]):null!==(m=M.exec(O))&&a(m[2],m[5],m[8],m[11],void 0,void 0,void 0,void 0,m[3],m[6],m[9],m[12]))}return this._generateMeshes({positions:c,coords:l,normals:h,indices:_})}},{key:"_generateMeshes",value:function(t){var e=65535,n=t.normals.length>0,r=t.coords.length>0;if(t.positions.length>e){var i=[],o=0,s={};for(s.positions=t.positions.concat(),s.coords=t.coords.concat(),s.indices=t.indices.concat(),s.normals=t.normals.concat();t.indices.length>0;){for(var a=Math.min(e,t.positions.length),u=t.indices.splice(0,a),c=[],l=[],h=[],d=void 0,f=0,p=0;p<u.length;p++)u[p]>f&&(f=u[p]),d=u[p],c.push(s.positions[d]),r&&l.push(s.coords[d]),n&&h.push(s.normals[d]),u[p]-=o;o=f+1,console.log("here1",u,c)}return this._callback&&this._callback(i,s),i}return console.log("here1",t),this._callback,t}}]),e}(l.default);h.parse=function(t){var e=new h;return e.parseObj(t)},e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(51),o=r(i);e.default={OBJLoader:o.default},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(4),a=r(s),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,o=arguments[3];i(this,t),this.gl=POLY.gl;var s=this.gl;o=o||s.RGBA;a.default.getExtension("OES_texture_float");if(!a.default.getExtension("OES_texture_float"))throw new Error("float textures not supported");var u=(a.default.getExtension("OES_texture_half_float"),s.UNSIGNED_BYTE),c=a.default.getExtension("OES_texture_half_float");a.default.getExtension("OES_texture_float_linear"),a.default.checkExtension("OES_texture_float")?u=s.FLOAT:c&&(u=c.HALF_FLOAT_OES),console.log(u,s.FLOAT),this._texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this._texture);var l=1;s.pixelStorei(s.UNPACK_ALIGNMENT,l),s.texImage2D(s.TEXTURE_2D,0,o,n,r,0,o,u,e),POLY.utils.isPowerOfTwo(n)&&POLY.utils.isPowerOfTwo(r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE)}return o(t,[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.gl;e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this._texture)}}]),t}();e.default=u,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r);
}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,r){n(this,t),this.gl=POLY.gl;var i=this.gl;r?this._texture=e:(this._texture=i.createTexture(),this.image=new Image,this.image.src=e,this.image.addEventListener("load",this.onImageLoaded.bind(this,this.image)))}return r(t,[{key:"onImageLoaded",value:function(t){var e=this.gl;e.bindTexture(e.TEXTURE_2D,this._texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),POLY.utils.isPowerOfTwo(t.width)&&POLY.utils.isPowerOfTwo(t.height)&&e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT),e.bindTexture(e.TEXTURE_2D,null)}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.gl;e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this._texture)}}]),t}();e.default=i,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.default=new(function(){function t(){n(this,t),this._loops=[],this._idLoop=1,this._active=!1}return r(t,[{key:"add",value:function(t,e){var n=this._idLoop;return this._loops.push({func:t,id:n,scope:e}),this._active||(window.requestAnimationFrame(this._update.bind(this)),this.start()),n}},{key:"clear",value:function(){this._loops=[],this.stop()}},{key:"start",value:function(){this._active=!0}},{key:"stop",value:function(){this._active=!1}},{key:"_update",value:function(){if(this._active)if(window.requestAnimationFrame(this._update.bind(this)),this._loops.length>0)for(var t=0;t<this._loops.length;t++)this._loops[t].func(this._loops[t]);else this.stop()}}]),t}()),t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getAndApplyExtension=e.FacesMultiplicator=e.FacesSeparator=e.isPowerOfTwo=e.loop=void 0;var i=n(55),o=r(i),s=n(57),a=r(s),u=n(13),c=r(u),l=n(7),h=r(l),d=n(6),f=r(d);e.loop=o.default,e.isPowerOfTwo=a.default,e.FacesSeparator=h.default,e.FacesMultiplicator=f.default,e.getAndApplyExtension=c.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return!(t&t-1)};e.default=n,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){a.call(this),e=e||u,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=o.queue(this._boundLoadResource,e),this.resources={}}var i=n(10),o=n(15),s=n(8),a=n(9),u=10,c=100;r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.add=r.prototype.enqueue=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(r=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._prepareUrl(e),this.resources[t]=new s(t,e,n),"function"==typeof r&&this.resources[t].once("afterMiddleware",r),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(c-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=c/this._buffer.length),this},r.prototype.before=r.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},r.prototype.after=r.prototype.use=function(t){return this._afterMiddleware.push(t),this},r.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var t in this.resources){var e=this.resources[t];e.off("complete",this._onLoad,this),e.isLoading&&e.abort()}return this.resources={},this},r.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},r.prototype._prepareUrl=function(t){var e=i(t,{strictMode:!0});return e.protocol||!e.path||0===e.path.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},r.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,o.eachSeries(this._beforeMiddleware,function(e,r){e.call(n,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t.once("complete",n._onLoad,n),t.load())})},r.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},r.prototype._onLoad=function(t){var e=this;o.eachSeries(this._afterMiddleware,function(n,r){n.call(e,t,r)},function(){t.emit("afterMiddleware",t),e._numToLoad--,e.progress+=e._progressChunk,e.emit("progress",e,t),t.error?e.emit("error",t.error,e,t):e.emit("load",e,t),0===e._numToLoad&&(e.progress=100,e._onComplete())}),t._dequeue()},r.LOAD_TYPE=s.LOAD_TYPE,r.XHR_RESPONSE_TYPE=s.XHR_RESPONSE_TYPE},function(t,e){"use strict";t.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,n="",r=new Array(4),i=0,o=0,s=0;i<t.length;){for(e=new Array(3),o=0;o<e.length;o++)i<t.length?e[o]=255&t.charCodeAt(i++):e[o]=0;switch(r[0]=e[0]>>2,r[1]=(3&e[0])<<4|e[1]>>4,r[2]=(15&e[1])<<2|e[2]>>6,r[3]=63&e[2],s=i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(o=0;o<r.length;o++)n+=this._keyStr.charAt(r[o])}return n}}},function(t,e,n){"use strict";t.exports=n(58),t.exports.Resource=n(8),t.exports.middleware={caching:{memory:n(61)},parsing:{blob:n(62)}},t.exports.async=n(15)},function(t,e){"use strict";var n={};t.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once("complete",function(){n[this.url]=this.data}),e()}}},function(t,e,n){"use strict";var r=n(8),i=n(59),o=window.URL||window.webkitURL;t.exports=function(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===r.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.isImage=!0,void(t.data.onload=function(){o.revokeObjectURL(n),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+i.encodeBinary(t.xhr.responseText),t.isImage=!0,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}},function(t,e,n){var r;/** @license
	 * JS Signals <http://millermedeiros.github.com/js-signals/>
	 * Released under the MIT license
	 * Author: Miller Medeiros
	 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
	 */
!function(i){function o(t,e,n,r,i){this._listener=e,this._isOnce=n,this.context=r,this._signal=t,this._priority=i||0}function s(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function a(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){a.prototype.dispatch.apply(t,arguments)}}o.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},a.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,n,r){var i,s=this._indexOfListener(t,n);if(s!==-1){if(i=this._bindings[s],i.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else i=new o(this,t,e,n,r),this._addBinding(i);return this.memorize&&this._prevParams&&i.execute(this._prevParams),i},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,r=this._bindings.length;r--;)if(n=this._bindings[r],n._listener===t&&n.context===e)return r;return-1},has:function(t,e){return this._indexOfListener(t,e)!==-1},add:function(t,e,n){return s(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return s(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){s(t,"remove");var n=this._indexOfListener(t,e);return n!==-1&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){e=this._bindings.slice(),this._shouldPropagate=!0;do r--;while(e[r]&&this._shouldPropagate&&e[r].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var u=a;u.Signal=a,r=function(){return u}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t,r){function i(t,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),_(n)?r.showHidden=n:n&&e._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return b(i)||(i=u(t,i,r)),i}var o=c(t,n);if(o)return o;var s=Object.keys(n),_=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),T(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(O(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(M(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return l(n)}var m="",g=!1,y=["{","}"];if(p(n)&&(g=!0,y=["[","]"]),O(n)){var x=n.name?": "+n.name:"";m=" [Function"+x+"]"}if(E(n)&&(m=" "+RegExp.prototype.toString.call(n)),M(n)&&(m=" "+Date.prototype.toUTCString.call(n)),T(n)&&(m=" "+l(n)),0===s.length&&(!g||0==n.length))return y[0]+m+y[1];if(r<0)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var w;return w=g?h(t,n,r,_,s):s.map(function(e){return d(t,n,r,_,e,g)}),t.seen.pop(),f(w,m,y)}function c(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)C(e,String(s))?o.push(d(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(t,e,n,r,i,!0))}),o}function d(t,e,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),C(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=v(n)?u(t,c.value,null):u(t,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),x(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function g(t){return"number"==typeof t}function b(t){return"string"==typeof t}function y(t){return"symbol"==typeof t}function x(t){return void 0===t}function E(t){return w(t)&&"[object RegExp]"===P(t)}function w(t){return"object"==typeof t&&null!==t}function M(t){return w(t)&&"[object Date]"===P(t)}function T(t){return w(t)&&("[object Error]"===P(t)||t instanceof Error)}function O(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function P(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}function R(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),j[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var L=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(L,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),a=r[n];n<o;a=r[++n])s+=v(a)||!w(a)?" "+a:" "+i(a);return s},e.deprecate=function(n,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return n.apply(this,arguments)}if(x(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var s=!1;return o};var k,N={};e.debuglog=function(t){if(x(k)&&(k=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!N[t])if(new RegExp("\\b"+t+"\\b","i").test(k)){var n=r.pid;N[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else N[t]=function(){};return N[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=_,e.isNull=v,e.isNullOrUndefined=m,e.isNumber=g,e.isString=b,e.isSymbol=y,e.isUndefined=x,e.isRegExp=E,e.isObject=w,e.isDate=M,e.isError=T,e.isFunction=O,e.isPrimitive=A,e.isBuffer=n(65);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",R(),e.format.apply(e,arguments))},e.inherits=n(64),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(14))},function(t,e){t.exports={default:["image/./sky_gradient.jpg"]}},function(t,e){t.exports="precision highp float;\n\nvoid main(void) {\n    gl_FragColor = vec4(1.0);\n}\n"},function(t,e){t.exports="precision highp float;\n\nattribute vec3 aPosition;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nvoid main(void) {\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n    gl_PointSize = 1.0;\n}\n"},69,function(t,e){t.exports="precision mediump float;\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(vec3(1., .2, 1.), opacity);\n    gl_FragColor.rgb *= opacity;\n}\n"},function(t,e){t.exports="\nprecision highp float;\n\nvarying vec2 vUv;\nuniform sampler2D texture;\n\nvoid main(void)\n{\n    vec4 color = texture2D(texture, vUv);\n    gl_FragColor = vec4(color.rgb, 1.);\n}\n"},function(t,e){t.exports="\nattribute vec3 aPosition;\nattribute vec2 aUv;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n\nvoid main(void) {\n\tvPos = aPosition;\n\tvUv = aUv;\n    gl_Position =  vec4(aPosition, 1.0);\n}\n"},function(t,e){t.exports="\nprecision highp float;\n\nvarying vec2 vUv;\nuniform sampler2D texture;\n\nvoid main(void)\n{\n    // vec4 color = texture2D(texture, vUv);\n    // gl_FragColor = vec4(1.);\n    // gl_FragColor = vec4(.2);\n    gl_FragColor = texture2D(texture, vUv);\n}\n"},function(t,e){t.exports="\nattribute vec2 aPosition;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec2 vUv;\n\n\nvoid main(void) {\n\tvUv = aPosition * .5 + .5;\n\n\tvec3 pos = vec4( projectionMatrix * vec4(aPosition, .0, 1.)).rgb;\n\n    gl_Position =  vec4(aPosition, 0., 1.0);\n    // gl_Position =  vec4(pos, 1.0);\n}\n"},function(t,e){t.exports="precision highp float;\nvarying vec4 vColor;\n\nvoid main(void) {\n\tif(distance(gl_PointCoord, vec2(.5)) > .5) discard;\n    gl_FragColor = vColor;\n}\n"},function(t,e){t.exports="// render.vert\n\nprecision highp float;\nattribute vec3 aPosition;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform sampler2D textureCurr;\nuniform sampler2D textureNext;\nuniform sampler2D textureExtra;\nuniform float percent;\nuniform float time;\nuniform vec2 viewport;\n\nvarying vec4 vColor;\nvarying vec3 vNormal;\n\nconst float radius = 0.01;\n\nvoid main(void) {\n\tvec2 uv      = aPosition.xy;\n\tvec3 posCurr = texture2D(textureCurr, uv).rgb;\n\tvec3 posNext = texture2D(textureNext, uv).rgb;\n\tvec3 pos     = mix(posCurr, posNext, percent);\n\tvec3 extra   = texture2D(textureExtra, uv).rgb;\n\tgl_Position  = projectionMatrix * viewMatrix * modelMatrix * vec4(pos, 1.0);\n\t// gl_Position  = projectionMatrix * viewMatrix * modelMatrix * vec4(pos, 1.0);\n\n\n\n\n\tfloat g \t = sin(extra.r + time * mix(extra.b, 1.0, .5));\n\tg \t\t\t = smoothstep(0.0, 1.0, g);\n\tg \t\t\t = mix(g, 1.0, .5);\n\tvColor       = vec4(vec3(g), 1.0);\n\n\tfloat distOffset = viewport.y * projectionMatrix[1][1] * radius / gl_Position.w;\n    gl_PointSize = distOffset * (.5 + extra.x * 1.0);\n}\n"},function(t,e){t.exports="#extension GL_EXT_draw_buffers : require\n\nprecision highp float;\n\nvarying vec3 vColor;\nvarying vec3 vExtra;\n\nvoid main(void) {\n    gl_FragData[0] = vec4(vColor, 1.0); // particles positions rgb\n    gl_FragData[1] = vec4(0.0, 0.0, 0.0, 1.0);\n    gl_FragData[2] = vec4(vExtra, 1.0); // extras to add more random\n    gl_FragData[3] = vec4(0.5, 0.5, 0.5, 1.0);\n}\n"},function(t,e){t.exports="precision highp float;\nattribute vec3 aPosition;\nattribute vec2 aUv;\nattribute vec3 aExtra;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vColor;\nvarying vec3 vNormal;\nvarying vec3 vExtra;\n\nvoid main(void) {\n\tvColor       = aPosition;\n\tvec3 pos     = vec3(aUv, 0.0);\n\tgl_Position  = vec4(pos, 1.0);\n\tgl_PointSize = 1.0;\n\n\tvExtra       = aExtra;\n}\n"},function(t,e){t.exports="// sim.frag\n\n#extension GL_EXT_draw_buffers : require\nprecision highp float;\n\nvarying vec2 vUv;\nuniform sampler2D textureVel;\nuniform sampler2D texturePos;\nuniform sampler2D textureExtra;\nuniform float time;\n// uniform float maxRadius;\n\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0;  }\n\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0;  }\n\nvec4 permute(vec4 x) {  return mod289(((x*34.0)+1.0)*x);  }\n\nvec4 taylorInvSqrt(vec4 r) {  return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v) {\n\tconst vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\tconst vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n\tvec3 i  = floor(v + dot(v, C.yyy) );\n\tvec3 x0 =   v - i + dot(i, C.xxx) ;\n\n\tvec3 g = step(x0.yzx, x0.xyz);\n\tvec3 l = 1.0 - g;\n\tvec3 i1 = min( g.xyz, l.zxy );\n\tvec3 i2 = max( g.xyz, l.zxy );\n\n\tvec3 x1 = x0 - i1 + C.xxx;\n\tvec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n\tvec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n\ti = mod289(i);\n\tvec4 p = permute( permute( permute(\n\t\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t\t + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n\t\t\t\t\t + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n\tfloat n_ = 0.142857142857; // 1.0/7.0\n\tvec3  ns = n_ * D.wyz - D.xzx;\n\n\tvec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n\tvec4 x_ = floor(j * ns.z);\n\tvec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n\tvec4 x = x_ *ns.x + ns.yyyy;\n\tvec4 y = y_ *ns.x + ns.yyyy;\n\tvec4 h = 1.0 - abs(x) - abs(y);\n\n\tvec4 b0 = vec4( x.xy, y.xy );\n\tvec4 b1 = vec4( x.zw, y.zw );\n\n\tvec4 s0 = floor(b0)*2.0 + 1.0;\n\tvec4 s1 = floor(b1)*2.0 + 1.0;\n\tvec4 sh = -step(h, vec4(0.0));\n\n\tvec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\tvec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n\tvec3 p0 = vec3(a0.xy,h.x);\n\tvec3 p1 = vec3(a0.zw,h.y);\n\tvec3 p2 = vec3(a1.xy,h.z);\n\tvec3 p3 = vec3(a1.zw,h.w);\n\n\tvec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\tp0 *= norm.x;\n\tp1 *= norm.y;\n\tp2 *= norm.z;\n\tp3 *= norm.w;\n\n\tvec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\tm = m * m;\n\treturn 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n}\n\nvec3 snoiseVec3( vec3 x ){\n\n\tfloat s  = snoise(vec3( x ));\n\tfloat s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n\tfloat s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n\tvec3 c = vec3( s , s1 , s2 );\n\treturn c;\n\n}\n\n\nvec3 curlNoise( vec3 p ){\n\n\tconst float e = .1;\n\tvec3 dx = vec3( e   , 0.0 , 0.0 );\n\tvec3 dy = vec3( 0.0 , e   , 0.0 );\n\tvec3 dz = vec3( 0.0 , 0.0 , e   );\n\n\tvec3 p_x0 = snoiseVec3( p - dx );\n\tvec3 p_x1 = snoiseVec3( p + dx );\n\tvec3 p_y0 = snoiseVec3( p - dy );\n\tvec3 p_y1 = snoiseVec3( p + dy );\n\tvec3 p_z0 = snoiseVec3( p - dz );\n\tvec3 p_z1 = snoiseVec3( p + dz );\n\n\tfloat x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n\tfloat y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n\tfloat z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n\tconst float divisor = 1.0 / ( 2.0 * e );\n\treturn normalize( vec3( x , y , z ) * divisor );\n\n}\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvoid main(void) {\n\tvec3 pos        = texture2D(texturePos, vUv).rgb;\n\tvec3 vel        = texture2D(textureVel, vUv).rgb;\n\tvec3 extra      = texture2D(textureExtra, vUv).rgb;\n\tfloat posOffset = (0.5 + extra.r * 0.2) * .25;\n\n\tfloat xAcc          = snoise(vec3(pos.x * posOffset, pos.y * posOffset, time));\n    xAcc                = (xAcc + 1.0) * .2;\n    float yAcc          = snoise(vec3(pos.y * posOffset, pos.z * posOffset, time));\n    float zAcc          = snoise(vec3(pos.z * posOffset, pos.x * posOffset, time));\n\n\t// vec3 finalPosition  = pos + (vel - vec3(.5) );\n\tvec3 acc        = vec3(xAcc, yAcc, zAcc);\n\t// // vec3 acc        = curlNoise(pos * posOffset + time * .3);\n\tvel += acc * .008;\n\t//\n\t// vec3 tmpVel         = vel.rgb - vec3(.5);\n\t//\n\tfloat dist = length(pos.yz);\n\t// float maxRadius   = 2.;\n\tfloat maxRadius   = 3. + cos(pos.x + time * 10.0) * 2.;\n\t// float maxRadius   = 1. + snoise(vec3(pos.x*.01, time * .01, 0.0)) * 3.;\n\tif(dist > maxRadius)\n\t{\n\t\tvec2 dirToCenter    = normalize(pos.yz);\n        float pullStrength  = .05;\n        vel.yz  -= dirToCenter * ( (dist - maxRadius) * pullStrength );\n\t}\n\t//\n\t// vel            = vec3(vel.x, tmpVel.yz + vec2(.5));\n\t//\n\t// // if(finalPosition.r < .01 || finalPosition.g <.1 || finalPosition.g > .9 || finalPosition.r > 1.01 )\n\t//\n\tif(pos.r > 10.  ) {\n        // pos.rgb    = vec3(.5) + (vec3(rand(pos.rg), rand(pos.gb), rand(pos.br)) -vec3(.5))* .15;\n        pos.r      = -10.0 - rand(pos.yz) * .01;\n    }\n\n\tconst float decrease = .96;\n\tvel *= decrease;\n    gl_FragData[0] = vec4(pos + vel, 1.0);\n\tgl_FragData[1] = vec4(vel, 1.0);\n\tgl_FragData[2] = vec4(extra, 1.0);\n\tgl_FragData[3] = vec4(0.0, 0.0, 0.0, 1.0);\n}\n"},function(t,e){t.exports="precision highp float;\n\nattribute vec2 aPosition;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\n\n\nvarying vec2 vUv;\nvarying vec2 vPos;\n\nvoid main(void) {\n    vUv = aPosition * .5 + .5;\n    vPos = aPosition;\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n}\n"}]));
//# sourceMappingURL=main.js.map